import{_ as Ie}from"./BqhJXTUm.js";import{d as I,X as tt,o as r,c as p,a as s,t as x,b as m,l as D,n as fe,u as e,w as B,h as G,R as ve,s as R,z as re,H as ae,Y as nt,Z as Me,e as Ce,$ as st,J as De,S as W,K as we,L as ie,C as H,D as Q,B as T,y as de,g as M,f as ne,a0 as Pe,a1 as je,a2 as ot,a3 as lt,F as q,r as Y,U as at,a4 as rt,x as Be,G as _e,i as E,A as xe,p as it,q as Le,P as Ne,I as ye,a5 as ut,a6 as Re,a7 as Fe,_ as ct,V as Ae,a8 as he,m as Se,v as qe,a9 as dt}from"./CYd5hogt.js";import{_ as ue}from"./IhCzvswf.js";import{_ as mt}from"./CqvKchru.js";import{_ as pt}from"./BVCmbStn.js";import{_ as Ee}from"./CCxXcF8T.js";import{_ as ft}from"./BvyazkRx.js";import{_ as Ye}from"./CPz06D4e.js";import{_ as vt}from"./wgxmNlY0.js";import{P as O,a as $e,S as Oe,b as ke,c as ze,I as _t,g as gt,h as ht,V as yt,i as bt,j as wt,k as xt}from"./BjsByrvX.js";import{u as le}from"./CFKnWy4K.js";import{u as We,a as ee,t as Ge}from"./BPqKb5GP.js";import{c as me}from"./CF0ZCrHm.js";import{o as ge,n as be,a as pe,s as te}from"./BeNRzrwp.js";import{_ as St}from"./B3dFsN5O.js";import{_ as He}from"./BKjW2vGI.js";import Qe from"./Cc-QcOWU.js";import{_ as $t}from"./ByO9Jult.js";import kt from"./2064atUi.js";import{_ as Ct}from"./CkECVEz0.js";import{_ as Lt}from"./DiniTw7G.js";import{_ as Vt}from"./CejaMEtr.js";import{D as Ve}from"./Dtyavigz.js";import{_ as Ut}from"./Dp7uII68.js";import{_ as Tt}from"./Dp_DNHpP.js";import"./BAiSaNHi.js";import"./1m7GWKYw.js";import"./DtpQx0Ne.js";import"./DMkMXhoc.js";import"./D6nfLA0K.js";import"./B08LnwSc.js";import"./CxIZtCgj.js";import"./Ceo9jh4g.js";import"./csYfvOSo.js";import"./DCEB7hob.js";import"./B-DIYZFu.js";import"./DIRaKQ2Y.js";import"./CFvfiu6T.js";import"./CFNrXGhF.js";import"./CCp9-jSB.js";import"./DvBWbfjg.js";import"./C9qe5ka0.js";import"./Whr4gT_R.js";import"./JsBdDeMb.js";import"./CHoBo5sC.js";import"./DdymJfvm.js";import"./DXrSQcim.js";import"./CVyGo-x7.js";import"./CpiCOp1G.js";const It={class:"flex items-center justify-center"},Ke=I({__name:"Rating",props:{rating:{}},setup(f){return(t,n)=>{const o=tt("i-ic:baseline-star");return r(),p("div",It,[s("span",null,x(t.rating),1),m(o,{class:"text-[#FFC658]"})])}}}),Mt={class:"fixed top-[3.25rem] md:top-[4.625rem] left-0 z-2 h-20 w-full bg-white text-black shadow-xl"},Dt={class:"h-full w-full flex items-center justify-between px-8 sm:px-4 md:px-32"},Pt={class:"flex items-center justify-center gap-x-4"},jt={class:"flex items-center justify-center gap-x-2"},Bt={class:"hidden sm:inline"},Nt={class:"hidden sm:inline"},Rt={class:"flex items-center justify-center gap-x-4"},Ft=I({__name:"Fixed",props:{name:{},photoUrl:{},isLike:{type:Boolean,default:!1},rating:{default:0},commentCount:{default:0}},emits:["update:addToFavorate","update:startReservation"],setup(f){const t=D(()=>`background-image: url('${f.photoUrl}')`);return(n,o)=>{const l=Ke,c=Ie,a=ue;return r(),p("div",Mt,[s("div",Dt,[s("div",Pt,[s("div",{class:"aspect-square w-12 rounded-full bg-cover bg-center bg-no-repeat",style:fe(e(t))},null,4),s("div",jt,[s("span",Bt,x(n.name),1),o[2]||(o[2]=s("span",{class:"hidden sm:inline"},"|",-1)),m(l,{rating:n.rating},null,8,["rating"]),s("span",Nt,"("+x(n.commentCount)+"則評論)",1)])]),s("div",Rt,[m(c,{class:"hidden sm:flex items-center justify-center","is-like":n.isLike,onClick:o[0]||(o[0]=u=>n.$emit("update:addToFavorate"))},null,8,["is-like"]),m(a,{class:"min-w-48 text-white",label:"預約服服按鈕",onClick:o[1]||(o[1]=u=>n.$emit("update:startReservation"))},{default:B(()=>o[3]||(o[3]=[G(" 預約服務 ")])),_:1})])])])}}}),At={class:"flex flex-col relative items-start gap-y-2"},qt={class:"flex items-center justify-center gap-x-1"},Et={key:0,class:"text-red-500 text-xs"},Yt={class:"border border-gray-300 w-full flex items-center justify-center gap-x-2 overflow-hidden rounded-lg"},Ot={key:0,class:"text-gray-400"},zt={key:1},Wt=["id"],Gt=I({__name:"DateTimeSingleRangerInModal",props:ve({label:{},id:{},isShowLabel:{type:Boolean,default:!0},errorMessage:{default:""},placeholder:{default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},{modelValue:{default:[null,null]},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const t=R(""),n=re(f,"modelValue"),o=R(!1),l=ae("calendarRef"),c=R(!1),a=R(!1),u=D(()=>n.value[0]!==null&&n.value[1]!==null),g=D({get:()=>{const i=n.value[0];return i===null?null:new Date(i)},set:i=>{i!==null&&C(i)}}),$=D({get:()=>{const i=n.value[1];return i===null?null:new Date(i)},set:i=>{i!==null&&C(i)}}),{weekNames:v,boardShownYear:_,boardShownMonth:w,calendar:k,dateTimeControl:h,refreshCalendar:y,setCurrentDateActive:S,setBoardShownYearButNotRefresh:P,setBoardShownMonthButNotRefresh:U}=nt(Me,g,$),j=D(()=>{const i=n.value;return i.length!==2||i[0]===null||i[1]===null?"":`${Ce(i[0],"YYYY/MM/DD").value}-${Ce(i[1],"YYYY/MM/DD").value}`}),L=()=>{if(f.disabled||a.value)return;c.value=!0;const i=n.value;i.length===2&&i[0]!==null&&i[1]!==null&&(C(new Date(i[0])),C(new Date(i[1]))),b(),o.value=!0,setTimeout(()=>{c.value=!1},200)},b=()=>{const i=g.value;i===null?J():(P(i.getFullYear()),U(i.getMonth()+1)),y()},F=(i,d)=>{S(i,d)},V=()=>{u.value&&K()},C=i=>{if(V(),n.value[0]===null){n.value[0]=i.setHours(0,0,0,0);return}n.value[1]=i.setHours(23,59,59,999)},K=()=>{n.value[0]=null,n.value[1]=null},J=()=>{const i=new Date,d=i.getFullYear(),A=i.getMonth()+1;P(d),U(A)},X=()=>{const i=new Date;J(),C(i)},Z=()=>{o.value=!1},se=()=>{a.value=!0,n.value=[null,null],setTimeout(()=>{a.value=!1},100)};return st(l,()=>{c.value||(o.value=!1)}),De(()=>{window.addEventListener("scroll",Z),t.value=W()}),we(()=>{window.removeEventListener("scroll",Z)}),ie(u,i=>{if(!i||c.value)return;const d=n.value[0],A=n.value[1];d===null||A===null||(d>A&&(n.value=[A,d]),o.value=!1)}),(i,d)=>{const A=ne,z=Pe,oe=je,Ze=ot,et=lt;return r(),p("div",null,[s("div",At,[H(s("span",qt,[i.required?(r(),p("span",Et," * ")):T("",!0),s("span",null,x(i.label),1)],512),[[Q,i.isShowLabel]]),s("div",Yt,[s("button",{class:"flex flex-grow items-center justify-between px-3 py-2",onClick:de(L,["prevent"])},[n.value.length===0||n.value.every(ce=>ce===null)?(r(),p("span",Ot,x(i.placeholder),1)):(r(),p("span",zt,x(e(j)),1)),n.value.length===0||n.value.every(ce=>ce===null)?(r(),M(A,{key:2,name:"i-heroicons:calendar-days-16-solid"})):(r(),p("button",{key:3,onClick:de(se,["prevent"])}," × "))])]),H(s("div",{ref_key:"calendarRef",ref:l,class:"border border-gray-300 shadow-[0_1rem_1.2rem_0_#d1d1d1] absolute top-22 z-10 w-[80vw] md:w-64 rounded-xl bg-white px-3 py-2"},[m(z,{"onUpdate:controlMonthOrYear":e(h)},{default:B(()=>[s("span",null,x(e(_))+"年"+x(e(w))+"月 ",1)]),_:1},8,["onUpdate:controlMonthOrYear"]),m(oe,{"week-name-list":e(v)},null,8,["week-name-list"]),m(Ze,{calendar:e(k),"onUpdate:currentDate":F},null,8,["calendar"]),m(et,{"onUpdate:cancel":d[0]||(d[0]=ce=>o.value=!1),"onUpdate:now":X,"onUpdate:clean":X})],512),[[Q,e(o)]])]),H(s("span",{id:e(t),class:"text-sm text-red-500"},x(i.errorMessage),9,Wt),[[Q,i.errorMessage]])])}}}),Ht={class:"flex flex-col items-start gap-y-2"},Qt={class:"flex items-center justify-center gap-x-1"},Kt={key:0,class:"text-red-500 text-xs"},Jt={class:"flex flex-col w-full items-start gap-y-1"},Xt=["for"],Zt=["id","value","disabled"],en=["id","placeholder","disabled"],tn=["id"],nn=I({__name:"CheckBoxListVertical",props:ve({label:{},id:{default:()=>W()},isShowLabel:{type:Boolean,default:!0},errorMessage:{default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},optionList:{},showInputWhenValueIs:{},placeholder:{default:""}},{modelValue:{},modelModifiers:{},input:{default:""},inputModifiers:{}}),emits:["update:modelValue","update:input"],setup(f){const t=W(),n=re(f,"modelValue"),o=re(f,"input");return(l,c)=>(r(),p("div",null,[s("div",Ht,[H(s("span",Qt,[l.required?(r(),p("span",Kt," * ")):T("",!0),s("span",null,x(l.label),1)],512),[[Q,l.isShowLabel]]),s("div",Jt,[(r(!0),p(q,null,Y(l.optionList,a=>(r(),p("label",{key:a.value.toString(),for:`${l.id}_${a.value}`,class:"w-full flex items-center gap-x-2"},[H(s("input",{id:`${l.id}_${a.value}`,"onUpdate:modelValue":c[0]||(c[0]=u=>n.value=u),type:"checkbox",value:a.value,disabled:l.disabled},null,8,Zt),[[at,n.value]]),s("span",null,x(a.title),1),H(s("input",{id:l.id,"onUpdate:modelValue":c[1]||(c[1]=u=>o.value=u),type:"text",placeholder:l.placeholder,class:"border border-gray-200 flex-grow rounded-lg px-3 py-2 outline-orange-600",disabled:l.disabled},null,8,en),[[Q,n.value===l.showInputWhenValueIs&&a.value===l.showInputWhenValueIs],[rt,o.value]])],8,Xt))),128))])]),H(s("span",{id:e(t),class:"text-sm text-red-500"},x(l.errorMessage),9,tn),[[Q,l.errorMessage]])]))}}),sn=ge({id:be(),petType:pe(O),petName:te().min(1,"請輸入寵物名稱"),extraServiceIDList:be().array(),size:pe($e).optional()}),Je=ge({serviceType:pe(Oe),reservationTime:be().int().nullable().array().length(2).refine(([f,t])=>f!==null&&t!==null,"請選擇預約日期"),cityName:te().min(1,"請選擇縣市"),distructName:te().min(1,"請選擇地區"),address:te().min(1,"請輸入詳細地址"),petList:sn.array().min(1,"請輸入寵物資訊").refine(f=>{const t=f.filter(n=>n.petType===O.Dog);return t.length===0?!0:t.every(n=>n.size!==void 0)},"請輸入寵物尺寸")}),Xe=ge({phone:te().regex(/^09\d{2}[-\s]?\d{3}[-\s]?\d{3}$/,"請輸入手機號碼格式").min(1,"請輸入手機號碼"),message:te().max(200,"要發送太長了！(200字以內)").optional()});Je.merge(Xe);const on=(f,t)=>{const n=R(!1),o=Ge(Je),l={serviceType:Oe.ToHomeCare,reservationTime:[null,null],cityName:"",distructName:"",address:"",petList:[{id:1,petType:O.Dog,petName:"",extraServiceIDList:[],size:$e.SMALL}]},{handleSubmit:c,isSubmitting:a,resetForm:u,errors:g}=We({validationSchema:o,initialValues:l}),$=c(Be(async L=>{n.value=!0,!await f(L)&&t&&t(),n.value=!1},800)),{value:v}=ee("serviceType"),{value:_}=ee("reservationTime"),{value:w}=ee("cityName"),{value:k}=ee("distructName"),{value:h}=ee("address"),{value:y}=ee("petList"),S=D(()=>{const L=me.find(b=>b.city===w.value);return L?L.districts.map(b=>({value:b.name,title:b.name})):[]}),P=me.map(L=>({value:L.city,title:L.city})),U=Object.entries(ke).map(([L,b])=>({value:+L,title:b})),j=Object.entries(ze).map(([L,b])=>({value:+L,title:b}));return{cityOptionList:P,serviceType:v,reservationTime:_,cityName:w,distructName:k,address:h,petList:y,formSubmit:$,isSubmitting:a,isSubmittingDisabled:n,resetForm:u,errors:g,districtRegionOptionList:S,petTypeOptionList:U,dogSizeOptionList:j}},ln={class:"border-b border-gray-300 flex flex-col w-full items-center gap-y-4 px-6 py-4"},an={class:"w-full flex items-center gap-x-4"},rn={class:"w-full flex items-center justify-center gap-x-4"},un={class:"w-full flex items-center justify-between px-4 py-3"},cn={class:"flex items-center justify-center gap-x-2"},dn=I({__name:"First",setup(f){const t=le(),{getExtraServiceOptionList:n,setTempReservation:o,setCurrentReservationStep:l}=t,{serviceTypeOptionList:c}=_e(t),{cityOptionList:a,serviceType:u,reservationTime:g,cityName:$,distructName:v,address:_,petList:w,formSubmit:k,isSubmittingDisabled:h,errors:y,districtRegionOptionList:S,petTypeOptionList:P,dogSizeOptionList:U}=on(async L=>(o(L),l(2),!0)),j=D({get:()=>w.value.length,set:L=>{const b=w.value,F=b.length;if(L>=F){let V=F===0?0:Math.max(...b.map(C=>C.id));for(let C=0;C<L-F;C++)V++,w.value.push({id:V,petType:O.Dog,petName:"",extraServiceIDList:[],size:$e.SMALL});return}w.value=w.value.filter((V,C)=>C<L)}});return ie($,()=>{v.value=""}),(L,b)=>{const F=Ee,V=Gt,C=ft,K=Ye,J=vt,X=nn,Z=ne,se=ue;return r(),p("form",{onSubmit:b[6]||(b[6]=de((...i)=>e(k)&&e(k)(...i),["prevent"]))},[s("div",ln,[m(F,{modelValue:e(u),"onUpdate:modelValue":b[0]||(b[0]=i=>E(u)?u.value=i:null),label:"預約服務","is-full-size":"",required:"",class:"w-full",options:e(c),disabled:e(h),"error-message":e(y).serviceType},null,8,["modelValue","options","disabled","error-message"]),m(V,{modelValue:e(g),"onUpdate:modelValue":b[1]||(b[1]=i=>E(g)?g.value=i:null),required:"",label:"預約時間",placeholder:"預約時間",disabled:e(h),"error-message":e(y).reservationTime,class:"w-full"},null,8,["modelValue","disabled","error-message"]),b[7]||(b[7]=s("div",{class:"w-full flex items-center gap-x-1"},[s("span",{class:"text-red-500 sm"},"*"),s("span",null,"服務地點")],-1)),s("div",an,[m(C,{modelValue:e($),"onUpdate:modelValue":b[2]||(b[2]=i=>E($)?$.value=i:null),"is-show-label":!1,placeholder:"選擇縣市","is-full-size":"",label:"縣市",required:"",class:"w-1/2",options:e(a),disabled:e(h),"no-value":""},null,8,["modelValue","options","disabled"]),m(C,{modelValue:e(v),"onUpdate:modelValue":b[3]||(b[3]=i=>E(v)?v.value=i:null),"is-full-size":"",label:"行政區",placeholder:"選擇城鄉鎮市區","is-show-label":!1,required:"",class:"w-1/2","no-value":"",options:e(S),disabled:e(h)},null,8,["modelValue","options","disabled"])]),H(s("div",{class:"w-full text-red-500 sm"},x(e(y).cityName||e(y).distructName),513),[[Q,e(y).cityName||e(y).distructName]]),m(K,{modelValue:e(_),"onUpdate:modelValue":b[4]||(b[4]=i=>E(_)?_.value=i:null),"is-show-label":!1,label:"詳細地址",placeholder:"詳細地址",disabled:e(h),required:"",class:"w-full","error-message":e(y).address},null,8,["modelValue","disabled","error-message"]),m(J,{modelValue:e(j),"onUpdate:modelValue":b[5]||(b[5]=i=>E(j)?j.value=i:null),required:"",class:"w-full",disabled:e(h),min:1},null,8,["modelValue","disabled"]),(r(!0),p(q,null,Y(e(w),i=>(r(),p("div",{key:i.id,class:"flex flex-col w-full items-center gap-y-4"},[m(F,{modelValue:i.petType,"onUpdate:modelValue":d=>i.petType=d,label:"寵物種類",options:e(P),disabled:e(h),"is-full-size":"",required:"",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),s("div",rn,[m(K,{modelValue:i.petName,"onUpdate:modelValue":d=>i.petName=d,label:"寵物名字","is-show-label":!1,placeholder:"請輸入寵物名字",required:"",class:xe({"w-full":i.petType!==e(O).Dog,"w-1/2":i.petType===e(O).Dog}),disabled:e(h)},null,8,["modelValue","onUpdate:modelValue","class","disabled"]),H(m(F,{modelValue:i.size,"onUpdate:modelValue":d=>i.size=d,label:"寵物尺寸","is-full-size":"","is-show-label":!1,placeholder:"請選擇寵物尺寸",required:"",class:"w-1/2",options:e(U),disabled:e(h)},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),[[Q,i.petType===e(O).Dog]])]),m(X,{modelValue:i.extraServiceIDList,"onUpdate:modelValue":d=>i.extraServiceIDList=d,label:"額外服務細項",class:"w-full","option-list":e(n)(e(u),i.petType),disabled:e(h)},null,8,["modelValue","onUpdate:modelValue","option-list","disabled"])]))),128)),b[8]||(b[8]=s("p",{class:"text-sm text-gray-400 w-full"}," 如上述無您需要的服務，可直接在申請完後與褓母溝通。 ",-1))]),s("div",un,[s("div",cn,[m(Z,{name:"i-mingcute:warning-line"}),b[9]||(b[9]=s("span",{class:"font-light"},"提醒您，報價會依據您的需求進行變動",-1))]),m(se,{type:"submit",label:"下一步按鈕",disabled:e(h),class:"min-w-32 text-white"},{default:B(()=>b[10]||(b[10]=[G(" 僅剩一步驟 ")])),_:1},8,["disabled"])])],32)}}}),mn=(f,t)=>{const n=R(!1),o=Ge(Xe),l={phone:"",message:""},{handleSubmit:c,isSubmitting:a,resetForm:u,errors:g}=We({validationSchema:o,initialValues:l}),$=c(Be(async w=>{n.value=!0,!await f(w)&&t&&t(),n.value=!1},800)),{value:v}=ee("phone"),{value:_}=ee("message");return{phone:v,message:_,formSubmit:$,isSubmitting:a,isSubmittingDisabled:n,resetForm:u,errors:g}},pn={class:"border-b border-gray-300 flex flex-col w-full items-center gap-y-4 px-6 py-4"},fn={class:"w-full flex items-center justify-between px-4 py-3"},vn={class:"flex items-center justify-center gap-x-2"},_n=I({__name:"Second",setup(f){const t=le(),{handleSubmitReservation:n,setCurrentReservationStep:o}=t,{phone:l,message:c,formSubmit:a,isSubmittingDisabled:u,errors:g}=mn(async $=>{const v=await n($);return v&&o(3),v});return($,v)=>{const _=Ye,w=St,k=ne,h=ue;return r(),p("form",{onSubmit:v[2]||(v[2]=de((...y)=>e(a)&&e(a)(...y),["prevent"]))},[s("div",pn,[m(_,{modelValue:e(l),"onUpdate:modelValue":v[0]||(v[0]=y=>E(l)?l.value=y:null),label:"聯絡電話",placeholder:"請輸入電話號碼(ex: 0912345678)",disabled:e(u),required:"",class:"w-full","error-message":e(g).phone},null,8,["modelValue","disabled","error-message"]),v[3]||(v[3]=s("div",{class:"w-full text-sm text-gray-300 mt-[-0.5rem]"}," 此資料僅用於服務需求，不會用於任何其他用途。 ",-1)),m(w,{modelValue:e(c),"onUpdate:modelValue":v[1]||(v[1]=y=>E(c)?c.value=y:null),label:"給褓母的訊息",placeholder:"如果有什麼特別需要寵物保姆注意的都可以留言，謝謝。",required:"",class:"w-full",disabled:e(u),"show-limit":200,"error-message":e(g).message},null,8,["modelValue","disabled","error-message"])]),s("div",fn,[s("div",vn,[m(k,{name:"i-mingcute:warning-line"}),v[4]||(v[4]=s("span",{class:"font-light"},"提醒您，報價會依據您的需求進行變動",-1))]),m(h,{type:"submit",label:"登入按鈕",disabled:e(u),class:"min-w-32 text-white"},{default:B(()=>v[5]||(v[5]=[G(" 完成預約單 ")])),_:1},8,["disabled"])])],32)}}}),gn={class:"border-b border-gray-300 flex flex-col w-full items-center gap-y-4 px-6 py-4"},hn={class:"text-center"},yn={class:"text-orange-600"},bn={class:"w-full flex items-center justify-between gap-x-4 px-4 py-3"},wn=I({__name:"Finish",props:{name:{}},setup(f){const t=it();return(n,o)=>{const l=He,c=ue;return r(),p("div",null,[s("article",gn,[o[4]||(o[4]=s("h3",null,"感謝您的預約！",-1)),s("p",hn,[o[2]||(o[2]=G(" 預約單詳情已傳送至您的信箱內， ")),s("span",yn,x(n.name),1),o[3]||(o[3]=G(" 褓母將盡快回覆您的預約，請留意您的手機，感謝。 "))])]),s("div",bn,[m(l,{label:"繼續預約按鈕",class:"border border-orange-600 w-1/2 flex items-center justify-center rounded-xl text-orange-600",onClick:o[0]||(o[0]=a=>("navigateTo"in n?n.navigateTo:e(Le))(e(t)("petSitters")))},{default:B(()=>o[5]||(o[5]=[G(" 繼續預約 ")])),_:1}),m(c,{label:"查看預約單按鈕",class:"w-1/2 text-white",onClick:o[1]||(o[1]=a=>("navigateTo"in n?n.navigateTo:e(Le))(e(t)("member-appointment")))},{default:B(()=>o[6]||(o[6]=[G(" 查看預約單 ")])),_:1})])])}}}),xn={class:"flex flex-col items-center justify-center"},Sn={key:0,class:"w-full border-b border-gray-300 flex items-center justify-between px-6 py-4"},$n={class:"flex items-center justify-center gap-x-4"},kn={class:"flex flex-col items-start justify-around"},Cn={class:"text-sm text-gray-300"},Ln=I({__name:"Reservation",props:ve({name:{},photoUrl:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const t=le(),{currentReservationStep:n}=_e(t),o=re(f,"modelValue"),l=D(()=>`background-image: url('${f.photoUrl}')`);return(c,a)=>{const u=pt,g=dn,$=_n,v=wn,_=Qe;return r(),M(_,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=w=>o.value=w)},{default:B(()=>[s("div",xn,[e(n)!==3?(r(),p("div",Sn,[s("div",$n,[s("div",{class:"aspect-square w-12 rounded-full bg-cover bg-center bg-no-repeat",style:fe(e(l))},null,4),s("div",kn,[a[2]||(a[2]=s("h3",{class:"text-lg font-medium"}," 預約申請 ",-1)),s("p",Cn," Step "+x(e(n))+"/2 ",1)])]),m(u,{onClick:a[0]||(a[0]=w=>o.value=!1)})])):T("",!0),e(n)===1?(r(),M(g,{key:1,class:"w-full"})):T("",!0),e(n)===2?(r(),M($,{key:2,class:"w-full"})):T("",!0),e(n)===3?(r(),M(v,{key:3,class:"w-full",name:c.name},null,8,["name"])):T("",!0)])]),_:1},8,["modelValue"])}}}),Vn={class:"w-2/3 flex flex-col items-start justify-around"},Un={class:"flex items-center gap-x-4"},Tn={class:"text-xl font-medium"},In=I({__name:"PersonalSection",props:{name:{},photoUrl:{},isLike:{type:Boolean,default:!1},rating:{default:0},commentCount:{default:0}},setup(f){const t=Ne(),n=le(),{handleLikeThisPetSitter:o,resetTempReservation:l,resetCurrentReservationStep:c}=n,a=R(!1),u=ae("personalInfo"),g=R(!1),{bottom:$}=ye(u),v=Re(Fe),{y:_}=v(),w=D(()=>`background-image: url('${f.photoUrl}')`),k=D(()=>_.value>$.value),h=async()=>{const S=Number(t.params.id);if(Number.isNaN(S))return!1;const P=o(S,!f.isLike);return P?(a.value=!0,setTimeout(()=>{a.value=!1},2e3),P):!1},y=()=>{g.value=!0};return ie(g,S=>{S||(c(),l())}),we(()=>{c(),l()}),(S,P)=>{const U=Ie,j=ne,L=ue,b=Ft,F=mt,V=Ln;return r(),p("div",{ref_key:"personalInfo",ref:u,class:"flex items-stretch gap-x-4"},[s("div",{class:"w-1/3 aspect-square rounded-full bg-cover bg-center bg-no-repeat","data-testid":"round",style:fe(e(w))},null,4),s("div",Vn,[s("div",Un,[s("h2",Tn,x(S.name),1),m(U,{class:"flex items-center justify-center","is-like":S.isLike,onClick:h},null,8,["is-like"])]),s("div",null,[m(j,{name:"i-openmoji:star"}),G(" "+x(S.rating)+" ("+x(S.commentCount)+"則評論) ",1)]),m(L,{class:"w-full text-white",label:"預約服服按鈕",onClick:y},{default:B(()=>P[2]||(P[2]=[G(" 預約服務 ")])),_:1})]),m(ut,{name:"slide"},{default:B(()=>[e(k)?(r(),M(b,{key:0,name:S.name,"photo-url":S.photoUrl,"is-like":S.isLike,rating:S.rating,"comment-count":S.commentCount,"onUpdate:addToFavorate":h,"onUpdate:startReservation":y},null,8,["name","photo-url","is-like","rating","comment-count"])):T("",!0)]),_:1}),m(F,{modelValue:e(a),"onUpdate:modelValue":P[0]||(P[0]=C=>E(a)?a.value=C:null),msg:S.isLike?"已收藏褓母":"已取消收藏"},{default:B(()=>[m(j,{name:"i-lucide:circle-check-big",class:"text-3xl text-green-500"})]),_:1},8,["modelValue","msg"]),m(V,{modelValue:e(g),"onUpdate:modelValue":P[1]||(P[1]=C=>E(g)?g.value=C:null),"photo-url":S.photoUrl,name:S.name},null,8,["modelValue","photo-url","name"])],512)}}}),Mn=ct(In,[["__scopeId","data-v-8958e604"]]),Dn=I({__name:"PetIcon",props:{icon:{}},setup(f){return(t,n)=>{const o=ne;return r(),p(q,null,[t.icon===e(O).Dog?(r(),M(o,{key:0,name:"i-ph:dog-bold"})):T("",!0),t.icon===e(O).Cat?(r(),M(o,{key:1,name:"i-ph:cat-bold"})):T("",!0),t.icon===e(O).Bird?(r(),M(o,{key:2,name:"i-ph:bird-bold"})):T("",!0),t.icon===e(O).Rabbit?(r(),M(o,{key:3,name:"i-ph:rabbit-bold"})):T("",!0),t.icon===e(O).Mouse?(r(),M(o,{key:4,name:"i-game-icons:mouse"})):T("",!0)],64)}}}),Pn={class:"flex flex-col items-center justify-center"},jn={class:"w-full flex items-center justify-between px-6 py-4 border-b border-gray-300"},Bn={class:"flex flex-col w-full items-center gap-y-4 px-6 py-4"},Nn=I({__name:"ExtraService",props:ve({extraService:{default:()=>[]}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const t=re(f,"modelValue");return(n,o)=>{const l=Qe;return r(),M(l,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=c=>t.value=c)},{default:B(()=>[s("article",Pn,[s("div",jn,[o[2]||(o[2]=s("h3",{class:"text-xl font-medium"}," 額外費用 ",-1)),s("button",{class:"aspect-square w-6 flex items-center justify-center rounded-full bg-gray-100",onClick:o[0]||(o[0]=c=>t.value=!1)}," × ")]),s("div",Bn,[o[3]||(o[3]=s("h4",{class:"w-full"}," 額外服務 ",-1)),(r(!0),p(q,null,Y(n.extraService,c=>(r(),p("div",{key:c.petType,class:"w-full flex flex-col"},[s("h5",null,x(e(ke)[c.petType]),1),(r(!0),p(q,null,Y(c.extraServiceList,a=>(r(),p("div",{key:a.id,class:"w-full flex items-center justify-between text-gray-600 font-light"},[s("span",null,x(a.name),1),s("span",null," $"+x(a.price),1)]))),128))]))),128))])])]),_:1},8,["modelValue"])}}}),Rn={class:"flex flex-wrap items-stretch gap-4 py-3"},Fn=I({__name:"PetSizeBoard",props:{pet:{}},setup(f){const t=R(!1),n=D(()=>f.pet.some(l=>!!l.extraServiceList&&l.extraServiceList.length>0)),o=()=>{t.value=!0};return(l,c)=>{const a=He,u=Nn;return r(),p("div",Rn,[e(n)?(r(),M(a,{key:0,label:"檢視額外費用按鈕",class:"border border-orange-600 w-full flex items-center justify-center rounded-xl text-orange-600",onClick:o},{default:B(()=>c[1]||(c[1]=[G(" 檢視額外費用 ")])),_:1})):T("",!0),m(u,{modelValue:e(t),"onUpdate:modelValue":c[0]||(c[0]=g=>E(t)?t.value=g:null),"extra-service":l.pet},null,8,["modelValue","extra-service"])])}}}),An={class:"w-full flex items-center justify-between"},qn={class:"w-1/2 flex items-center gap-x-4"},En={class:"flex flex-col items-start"},Yn={class:"flex items-center gap-x-2"},On={class:"font-bold"},zn={class:"flex flex-col items-start justify-start"},Wn={class:"text-lg font-bold"},Gn={key:0,class:"text-gray-400 sm"},Hn={class:"w-1/2 text-sm text-right flex items-center justify-end"},Qn={class:"text-2xl font-medium"},Kn=I({__name:"MainService",props:{iconName:{default:()=>_t.Sitter},name:{},description:{default:""},price:{},pet:{}},setup(f){return(t,n)=>{const o=$t,l=Dn,c=kt,a=Fn;return r(),p("div",null,[s("div",An,[s("div",qn,[m(o,{active:"",class:"aspect-square h-full text-3xl","icon-name":t.iconName},null,8,["icon-name"]),s("div",En,[s("div",Yn,[s("h3",On,x(t.name),1),(r(!0),p(q,null,Y(t.pet,u=>(r(),M(c,{ui:{base:`[@media(pointer:coarse)]:hidden h-[${8+(u.petSizeList??[]).length*4}px] px-4 py-3 text-base font-normal relative`},key:u.petType},{default:B(()=>[m(l,{icon:u.petType},null,8,["icon"])]),text:B(()=>[s("div",zn,[s("span",Wn,x(e(ke)[u.petType]),1),(r(!0),p(q,null,Y(u.petSizeList??[],g=>(r(),p("span",{class:"text-gray-400",key:g},x(e(ze)[g]),1))),128))])]),_:2},1032,["ui"]))),128))]),t.description?(r(),p("span",Gn,x(t.description),1)):T("",!0)])]),s("div",Hn,[s("span",Qn,"$"+x(t.price),1),n[0]||(n[0]=s("span",null," /次",-1))])]),m(a,{class:"w-full",pet:t.pet},null,8,["pet"])])}}}),Jn={class:"flex flex-col items-center justify-between"},Xn=["aria-label"],Zn={class:"w-full flex items-center justify-between"},es={class:"text-[#E05B21]"},ts=I({__name:"Region",props:{title:{},content:{}},setup(f){const t=R(!1),n=()=>{t.value=!t.value};return(o,l)=>{const c=ne;return r(),p("div",Jn,[s("button",{"aria-label":o.title,class:"w-full cursor-pointer select-none items-center rounded-md border border-solid border-[#FFCEC4] px-4 py-2 bg-[#FEF9F6]",onClick:n},[s("div",Zn,[s("span",es,x(o.title),1),e(t)?(r(),M(c,{key:0,name:"i-heroicons:chevron-down-16-solid",class:"h-4 md:h-6 w-4 md:w-6 text-[#E05B21]"})):T("",!0),e(t)?T("",!0):(r(),M(c,{key:1,name:"heroicons:chevron-up-16-solid",class:"h-4 md:h-6 w-4 md:w-6 text-[#E05B21]"}))])],8,Xn),H(s("div",{class:"w-full whitespace-pre-line break-all px-3 py-2 text-sm"},x(o.content),513),[[Q,e(t)]])])}}}),ns=(f,t)=>{const{getCalendar:n}=f(d=>({date:d})),o=["日","一","二","三","四","五","六"],l=R("date"),c=new Date,a=R(c.getFullYear()),u=R(c.getMonth()+1),g=Ae([]),$=R(!1),v=R(""),_=R(!1),w=D(()=>a.value===he().value.getFullYear()),k=D(()=>{if(!w.value)return"none";const d=he().value.getMonth()+1;return u.value===d-1?"prev":u.value===d?"current":u.value===d+1?"next":"none"}),h=D(()=>`${a.value}年  ${u.value}月`),y=()=>n(u.value,a.value,d=>(d.id=crypto.randomUUID(),L(d,"prev")&&(d.isNow=!0),d.isActive=!P(d.date),d.isBlur="prev",d),d=>(d.id=crypto.randomUUID(),L(d,"current")&&(d.isNow=!0),d.isActive=!S(d.date),d),d=>(d.id=crypto.randomUUID(),L(d,"next")&&(d.isNow=!0),d.isActive=!U(d.date),d.isBlur="next",d)),S=d=>{const A=u.value,z=t.find(oe=>oe.month===A);return z?z.day.includes(d):!1},P=d=>{const A=u.value-1,z=t.find(oe=>oe.month===A);return z?z.day.includes(d):!1},U=d=>{const A=u.value+1,z=t.find(oe=>oe.month===A);return z?z.day.includes(d):!1},j=()=>{g.value=y()},L=(d,A)=>A===k.value&&d.date===he().value.getDate(),b=d=>{d==="+"&&J(),d==="-"&&X(),d==="++"&&C(),d==="--"&&K()},F=d=>{a.value=d},V=d=>{u.value=d},C=()=>{a.value++,j()},K=()=>{a.value--,j()},J=()=>{if(u.value===12){u.value=1,a.value++,j();return}u.value++,j()},X=()=>{if(u.value===1){u.value=12,a.value--,j();return}u.value--,j()},Z=()=>{$.value=!$.value},se=d=>{i(!1),v.value=d},i=d=>{_.value=d};return{weekNames:o,switcher:l,boardShownYear:a,boardShownMonth:u,calendar:g,isShowClockSelector:$,selectedClockMessage:v,isClockMessageEmpty:_,boardShownIndicator:h,refreshCalendar:j,dateTimeControl:b,toggleClockSelector:Z,receiveMessageFromClockSelector:se,changeClockMessageEmptyStatus:i,setBoardShownYearButNotRefresh:F,setBoardShownMonthButNotRefresh:V}},ss={class:"border border-gray-300 w-full rounded-xl bg-white px-3 py-2"},os={key:0,class:"h-7 w-full flex items-center justify-center text-white"},ls={class:"aspect-square w-7 flex items-center justify-center rounded-full bg-orange-600/50"},as={key:1,class:"h-7 w-full flex items-center justify-center"},rs={key:0,class:"border border-orange-500 aspect-square w-7 flex items-center justify-center rounded-full hover:bg-orange-300/50"},is=I({__name:"ReservationCalendar",props:{unavailableTimeList:{}},setup(f){const{weekNames:t,boardShownYear:n,boardShownMonth:o,calendar:l,dateTimeControl:c,refreshCalendar:a}=ns(Me,f.unavailableTimeList);a();const u=new Date,g=D(()=>u.getMonth()===o.value-1),$=D(()=>u.getMonth()+2===o.value);return(v,_)=>{const w=Pe,k=je;return r(),p("div",ss,[m(w,{"is-disable-previous-month":e(g),"is-disable-next-month":e($),"is-disabled-year":"","onUpdate:controlMonthOrYear":e(c)},{default:B(()=>[s("span",null,x(e(n))+"年"+x(e(o))+"月 ",1)]),_:1},8,["is-disable-previous-month","is-disable-next-month","onUpdate:controlMonthOrYear"]),m(k,{"week-name-list":e(t)},null,8,["week-name-list"]),(r(!0),p(q,null,Y(e(l),h=>(r(),p("section",{key:h[0].id,class:"mb-2 flex select-none items-center font-light"},[(r(!0),p(q,null,Y(h,y=>(r(),p("div",{key:y.id,class:"w-1/7 flex items-center justify-center"},[y.isActive?(r(),p("div",os,[s("span",ls,x(y.date),1)])):(r(),p("div",as,[y.isNow?(r(),p("span",rs,x(y.date),1)):(r(),p("span",{key:1,class:xe(["hover:bg-orange-300/50 aspect-square w-7 flex items-center justify-center rounded-full",{"text-[#C0C4CC]":y.isBlur}])},x(y.date),3))]))]))),128))]))),128))])}}}),us={class:"flex flex-col items-start gap-y-4 rounded-xl bg-white px-4 py-3"},cs={class:"w-full space-y-2"},ds=I({__name:"ServiceSection",props:{serviceList:{},serviceRegionCodeList:{},unavailableTimeList:{}},setup(f){const t=le(),{setCurrentSelectedService:n}=t,{serviceTypeOptionList:o,currentSelectedService:l}=_e(t),c=D({get:()=>l.value,set:v=>{n(v)}}),a=v=>{const _=me.find(w=>w.code===v.cityCode);return _?_.city:""},u=v=>{const _=me.find(S=>S.code===v.cityCode);if(!_)return"";const w=_.districts,k=v.distructCodeList,h=k.length,y=w.length;return h>y?"":y>=5&&h>=4?$(k,w):g(k,w)},g=(v,_)=>{const w=[];return v.forEach(k=>{const h=_.find(y=>y.code===k);h&&w.push(h.name)}),w.join(",")},$=(v,_)=>{const w=v.toSorted();let k=0,h=0;const y=[];for(;k<w.length&&h<_.length;)w[k]===_[h].code&&(y.push(_[h].name),k++),h++;return y.join(",")};return(v,_)=>{const w=Kn,k=ts,h=Ee,y=is;return r(),p("div",us,[_[1]||(_[1]=s("div",{class:"text-gray-600"}," 提供的服務 ",-1)),(r(!0),p(q,null,Y(v.serviceList,S=>(r(),M(w,Se({key:S.id,class:"w-full",ref_for:!0},S),null,16))),128)),_[2]||(_[2]=s("div",{class:"w-full h-[2px] bg-gray-200"},null,-1)),_[3]||(_[3]=s("div",null,"可服務區域",-1)),s("div",cs,[(r(!0),p(q,null,Y(v.serviceRegionCodeList,S=>(r(),M(k,{key:S.cityCode,title:a(S),content:u(S)},null,8,["title","content"]))),128))]),_[4]||(_[4]=s("div",{class:"w-full h-[2px] bg-gray-200"},null,-1)),_[5]||(_[5]=s("div",null,"可預約時間",-1)),m(h,{modelValue:e(c),"onUpdate:modelValue":_[0]||(_[0]=S=>E(c)?c.value=S:null),label:"可預約時間","is-show-label":!1,options:e(o),"is-full-size":"",class:"w-full"},null,8,["modelValue","options"]),m(y,{"unavailable-time-list":v.unavailableTimeList},null,8,["unavailable-time-list"]),_[6]||(_[6]=s("div",{class:"flex items-center gap-x-2"},[s("div",{class:"h-4 w-4 rounded-full bg-orange-600/50"}),s("span",null,"可預約日期")],-1))])}}}),ms={class:"flex items-start gap-x-2 md:gap-x-4"},ps={class:"flex flex-col items-start gap-y-1 md:gap-y-2"},fs={class:"text-md md:text-xl font-medium"},vs={class:"text-orange-600 text-sm"},_s=I({__name:"CertificateBadge",props:{title:{},content:{}},setup(f){return(t,n)=>(r(),p("div",ms,[qe(t.$slots,"default"),s("div",ps,[s("p",fs,x(t.title),1),s("p",vs,x(t.content),1)])]))}});var N=(f=>(f[f.Unknown=0]="Unknown",f[f.Image=1]="Image",f[f.Video=2]="Video",f))(N||{});const Ue=["jpg","jpeg","png","gif","bmp","webp","svg","avif"],Te=["mp4","mov","avi","wmv","flv","mkv","webm","ogg"];ge({id:te(),extension:pe(N),url:te()});const gs={class:"relative overflow-hidden"},hs=["src"],ys={key:2,class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex transform items-center justify-center"},bs=I({__name:"MediaVideoOrImage",props:{url:{},type:{default:()=>N.Unknown},showImply:{type:Boolean,default:!1}},setup(f){return(t,n)=>{const o=Lt;return r(),p("div",gs,[t.type===e(N).Video?(r(),M(o,{key:0,class:"w-full object-cover object-center",src:t.url},null,8,["src"])):T("",!0),t.type===e(N).Video?(r(),p("video",{key:1,class:"object-cover object-center",src:t.url},n[0]||(n[0]=[s("track",{default:"",kind:"captions"},null,-1)]),8,hs)):T("",!0),t.showImply?(r(),p("div",ys,[qe(t.$slots,"default")])):T("",!0)])}}}),ws=()=>({checkMediaType:async n=>{var o;try{const l=(o=n.split(".").pop())==null?void 0:o.toLowerCase();if(l){if(Ue.findIndex(u=>u===l)!==-1)return N.Image;if(Te.findIndex(u=>u===l)!==-1)return N.Video}const a=(await fetch(n,{method:"HEAD"})).headers.get("content-type");return a?a.startsWith("image/")?N.Image:a.startsWith("video/")?N.Video:N.Unknown:N.Unknown}catch(l){return console.error("Error checking media type",l),N.Unknown}},convertMediaExtensionType:async n=>{var o;try{const l=(o=n.split(".").pop())==null?void 0:o.toLowerCase();if(l){if(Ue.findIndex(u=>u===l)!==-1)return{id:W("$6lalcXwTC7"),extension:N.Image,url:n};if(Te.findIndex(u=>u===l)!==-1)return{id:W("$UcvHHODhJ6"),extension:N.Video,url:n}}const a=(await fetch(n,{method:"HEAD"})).headers.get("content-type");return a?a.startsWith("image/")?{id:W("$gVy8CECiaf"),extension:N.Image,url:n}:a.startsWith("video/")?{id:W("$QpSG4FbG7h"),extension:N.Video,url:n}:{id:W("$Od1MeKnLiq"),extension:N.Unknown,url:n}:{id:W("$Bwg765evQk"),extension:N.Unknown,url:n}}catch(l){return console.error("Error checking media type",l),{id:W(),extension:N.Unknown,url:n}}}}),xs={class:"flex items-center justify-center gap-x-4"},Ss={key:1,class:"w-1/2 grid grid-cols-2 gap-x-4"},$s=I({__name:"Media",props:{attachmentUrlList:{}},setup(f){const{convertMediaExtensionType:t}=ws(),n=Ae([]),o=D(()=>{const a=n.value;if(a.length!==0)return a[0]}),l=D(()=>{const a=n.value.slice(1,5);if(a.length!==0)return a}),c=async a=>{const u=a.map(g=>t(g));return Promise.all(u)};return ie(()=>f.attachmentUrlList,async a=>{n.value=await c(a)},{immediate:!0}),(a,u)=>{const g=bs;return r(),p("div",xs,[e(o)?(r(),M(g,{key:0,class:"w-1/2 rounded-xl",url:e(o).url,type:e(o).extension},null,8,["url","type"])):T("",!0),e(l)?(r(),p("div",Ss,[(r(!0),p(q,null,Y(e(l),($,v)=>(r(),M(g,{key:$.id,url:$.url,type:$.extension,class:"rounded-xl","show-imply":v===e(l).length-1},{default:B(()=>u[0]||(u[0]=[s("span",{class:"text-white underline"},"檢視所有照片",-1)])),_:2},1032,["url","type","show-imply"]))),128))])):T("",!0)])}}}),ks={class:"flex flex-col items-start gap-y-4 rounded-xl bg-white px-6 py-4"},Cs={class:"whitespace-pre-line text-black/60 leading-loose"},Ls={class:"border border-gray-300 w-full flex flex-wrap md:flex-nowrap items-center justify-around rounded-xl px-3 md:px-4 py-2 md:py-3 gap-y-2 md:gap-y-0"},Vs={class:"w-1/2 md:w-1/4"},Us={class:"w-1/2 md:w-1/4"},Ts={class:"w-1/2 md:w-1/4"},Is={class:"w-1/2 md:w-1/4"},Ms={class:"flex items-center gap-x-4"},Ds=I({__name:"AboutSection",props:{name:{},about:{default:""},certificate:{},attachmentUrlList:{},lineUrl:{default:""},youtubeUrl:{default:""},facebookUrl:{default:""},shareLinkUrl:{default:""}},setup(f){return(t,n)=>{const o=ne,l=_s,c=$s,a=Vt;return r(),p("div",ks,[n[1]||(n[1]=s("h3",{class:"text-xl font-medium"}," 關於褓母 ",-1)),s("p",Cs,x(t.about),1),s("div",Ls,[s("div",Vs,[m(l,{title:"相關證照",content:e(gt)[t.certificate.specialPet]},{default:B(()=>[m(o,{class:"text-xl md:text-2xl",name:"i-bx:shield"})]),_:1},8,["content"])]),s("div",Us,[m(l,{title:"褓母測驗",content:e(ht)[t.certificate.petSitter]},{default:B(()=>[m(o,{class:"text-xl md:text-2xl",name:"i-fluent:hat-graduation-24-regular"})]),_:1},8,["content"])]),s("div",Ts,[m(l,{title:"褓母經驗",content:`已從事${t.certificate.experienceYear}年`},{default:B(()=>[m(o,{class:"text-xl md:text-2xl",name:"i-carbon:badge"})]),_:1},8,["content"])]),s("div",Is,[m(l,{title:"身份認證",content:e(yt)[t.certificate.verifiedIdentity]},{default:B(()=>[m(o,{class:"text-xl md:text-2xl",name:"i-eva:person-outline"})]),_:1},8,["content"])])]),t.attachmentUrlList?(r(),M(c,{key:0,"attachment-url-list":t.attachmentUrlList},null,8,["attachment-url-list"])):T("",!0),s("div",Ms,[n[0]||(n[0]=s("p",null,"保姆相關社群:",-1)),m(a,{name:t.name,"line-link":t.lineUrl,"youtube-link":t.youtubeUrl,"facebook-link":t.facebookUrl,link:t.shareLinkUrl},null,8,["name","line-link","youtube-link","facebook-link","link"])])])}}}),Ps={class:"h-2 w-full rounded-full bg-[#FFF5F0]"},js=I({__name:"RatingBar",props:{percentageRate:{}},setup(f){return(t,n)=>(r(),p("div",Ps,[t.percentageRate>0?(r(),p("div",{key:0,class:"h-full rounded-full bg-[#FB976E]",style:fe(`width: ${t.percentageRate}%`)},null,4)):T("",!0)]))}}),Bs={class:"flex flex-wrap md:flex-nowrap items-center justify-center gap-y-4 md:gap-x-4 md:gap-y-0 px-2 md:px-6"},Ns={class:"w-full md:w-1/4 flex flex-col items-center md:items-start"},Rs={class:"w-full md:w-3/4 space-y-1 md:space-y-2"},Fs=I({__name:"RatingDashboard",props:{rating:{},commentCount:{},allRate:{}},setup(f){const t=D(()=>Object.keys(f.allRate).toSorted((l,c)=>+c-+l)),n=D(()=>Object.values(f.allRate).reduce((l,c)=>l+c,0)),o=(l,c)=>{if(typeof c>"u")return 0;if(l===0)return console.error("demonitor === 0"),0;if(c>l)return console.error("numerator > total"),0;const a=new Ve(c),u=new Ve(l);return a.div(u).toNumber()*100};return(l,c)=>{const a=Ke,u=js;return r(),p("div",Bs,[s("div",Ns,[m(a,{rating:l.rating,class:"gap-x-1 text-4xl font-medium"},null,8,["rating"]),s("span",null,"共有 "+x(l.commentCount.toLocaleString())+" 則評論",1)]),s("div",Rs,[(r(!0),p(q,null,Y(e(t),g=>(r(),p("div",{key:g,class:"w-full flex items-center justify-center gap-x-3"},[m(a,{rating:+g},null,8,["rating"]),m(u,{"percentage-rate":o(e(n),l.allRate[g])},null,8,["percentage-rate"]),s("span",null,"("+x(l.allRate[g])+")",1)]))),128))])])}}}),As={class:"flex flex-col items-start gap-y-6 rounded-xl bg-white px-6 py-4"},qs={class:"font-medium"},Es=I({__name:"CommentSection",props:{rating:{},commentCount:{},allRate:{},discussionList:{}},setup(f){return(t,n)=>{const o=Fs,l=Ut;return r(),p("div",As,[s("div",qs," 評價 ("+x(t.commentCount)+") ",1),m(o,{class:"w-full",rating:t.rating,"comment-count":t.commentCount,"all-rate":t.allRate},null,8,["rating","comment-count","all-rate"]),m(l,{class:"w-full","discussion-list":t.discussionList},null,8,["discussion-list"])])}}}),Ys={class:"border-b border-gray-300 flex flex-col items-center justify-between py-6"},Os={class:"text-sm md:text-lg"},zs={key:0,class:"whitespace-pre-line text-[#461C08] text-xs md:text-base leading-loose md:leading-normal self-start"},Ws=I({__name:"Accordion",props:{title:{},content:{}},setup(f){const t=R(!1),n=()=>{t.value=!t.value};return(o,l)=>{const c=ne,a=Tt;return r(),p("div",Ys,[m(a,{label:o.title,class:xe(["w-full flex select-none items-center justify-between",{"pb-6":e(t)}]),onClick:n},{default:B(()=>[s("span",Os,x(o.title),1),e(t)?(r(),M(c,{key:0,name:"i-heroicons-minus",class:"h-4 md:h-6 w-4 md:w-6"})):T("",!0),e(t)?T("",!0):(r(),M(c,{key:1,name:"i-heroicons-plus",class:"h-4 md:h-6 w-4 md:w-6"}))]),_:1},8,["label","class"]),e(t)?(r(),p("div",zs,x(o.content),1)):T("",!0)])}}}),Gs={class:"rounded-xl bg-white px-4 md:px-6 py-3 md:py-4"},Hs=I({__name:"ServiceQASection",props:{qaAccordionList:{}},setup(f){return(t,n)=>{const o=Ws;return r(),p("div",Gs,[n[0]||(n[0]=s("div",{class:"text-[#461B09]"}," 服務QA ",-1)),(r(!0),p(q,null,Y(t.qaAccordionList,l=>(r(),M(o,Se({key:l.id,ref_for:!0},l),null,16))),128))])}}}),Qs={class:"flex flex-wrap md:flex-nowrap items-start gap-y-4 md:gap-x-4 md:gap-y-0 px-8 md:px-12 py-8"},Ks={class:"w-full md:w-1/3 flex flex-col items-center gap-y-4"},Js={class:"w-full md:w-2/3 flex flex-col items-start gap-y-4"},Ho=I({__name:"[id]",setup(f){const t=le(),{handleGetPetSitterBasicInfo:n,handleGetCommentInfo:o,handleGetServiceQAList:l,resetTempReservation:c}=t,{petSitterDetail:a}=_e(t),u=ae("personalSection"),g=ae("commentSection"),$=ae("qASection"),v=R(1),_=Re(Fe),{bottom:w}=ye(u),{bottom:k}=ye(g),{y:h}=_({behavior:"smooth"}),{width:y}=dt(),S=Ne(),P=Number(S.params.id),U=D(()=>{const V=a.value.info;return V||{id:-1,name:"",about:"",photoUrl:"",rating:0,commentCount:0,servicePrice:[],serviceRegionCodeList:[],unavailableTimeList:[],petsCertificate:{specialPet:bt.None,petSitter:wt.None,experienceYear:0,verifiedIdentity:xt.None},attachmentUrlList:[]}}),j=D(()=>{const V=a.value.comment;return V||{rating:0,commentCount:0,allRate:{1:0,2:0,3:0,4:0,5:0},discussionList:[]}}),L=D(()=>{const V=a.value.QA;return V||[]}),b=D(()=>[{id:1,title:"關於保姆"},{id:2,title:`評價(${j.value.commentCount})`},{id:3,title:"服務QA"}]),F=V=>{V===1&&(h.value=0);const C=y.value<768?104:148;V===2&&(h.value=w.value-C),V===3&&(h.value=k.value-C)};return we(()=>{c()}),ie(h,V=>{const C=y.value<768?104:148;if(V<w.value-C){v.value=1;return}if(V>k.value-C){v.value=3;return}v.value=2}),De(async()=>{await Promise.all([n(P),o(P),l(P)])}),(V,C)=>{const K=Mn,J=ds,X=Ct,Z=Ds,se=Es,i=Hs;return r(),p("div",Qs,[s("div",Ks,[m(K,{class:"w-full",name:e(U).name,"is-like":e(U).isLike,"photo-url":e(U).photoUrl,rating:e(U).rating,"comment-count":e(j).commentCount},null,8,["name","is-like","photo-url","rating","comment-count"]),m(J,{class:"w-full","service-list":e(U).servicePrice,"service-region-code-list":e(U).serviceRegionCodeList,"unavailable-time-list":e(U).unavailableTimeList},null,8,["service-list","service-region-code-list","unavailable-time-list"])]),s("div",Js,[m(X,{modelValue:e(v),"onUpdate:modelValue":C[0]||(C[0]=d=>E(v)?v.value=d:null),class:"w-full","tab-list":e(b),"onUpdate:triggerTab":F},null,8,["modelValue","tab-list"]),m(Z,{ref_key:"personalSection",ref:u,class:"w-full",name:e(U).name,about:e(U).about,certificate:e(U).petsCertificate,"attachment-url-list":e(U).attachmentUrlList,"line-url":e(U).lineUrl,"youtube-url":e(U).youtubeUrl,"facebook-url":e(U).facebookUrl,"share-link-url":e(U).shareLinkUrl},null,8,["name","about","certificate","attachment-url-list","line-url","youtube-url","facebook-url","share-link-url"]),m(se,Se({ref_key:"commentSection",ref:g,class:"w-full"},e(j)),null,16),m(i,{ref_key:"qASection",ref:$,class:"w-full","qa-accordion-list":e(L)},null,8,["qa-accordion-list"])])])}}});export{Ho as default};
