import{_ as y}from"./DiniTw7G.js";import{_ as V}from"./BVSNKv9u.js";import{_ as I}from"./4V6MRStw.js";import{_ as R}from"./IhCzvswf.js";import{_ as T}from"./BlH-aw9X.js";import{s as F,x as k,d as B,p as C,o as N,c as Z,b as e,w as g,a as b,u as o,i as h,h as $,y as j,q}from"./CYd5hogt.js";import{u as A}from"./COQckHv3.js";import{u as D,a as x,t as L}from"./BPqKb5GP.js";import{o as U,s as P,Z as M}from"./BeNRzrwp.js";import"./CHoBo5sC.js";import"./BMigu0w3.js";const z=U({password:P().min(6,"長度為6-18個字元").max(18,"長度為6-18個字元").regex(/(?=.*[A-Z]).*/g,"包含1個大寫字母").regex(/(?=.*\d).*/g,"包含1個數字"),confirmPassword:P().min(6,"長度為6-18個字元").max(18,"長度為6-18個字元").regex(/(?=.*[A-Z]).*/g,"包含1個大寫字母").regex(/(?=.*\d).*/g,"包含1個數字")}).superRefine(({password:m,confirmPassword:a},t)=>{m!==a&&t.addIssue({path:["confirmPassword"],code:M.custom,message:"與密碼不一致"})}),E=(m,a)=>{const t=F(!1),f=L(z),r={password:"",confirmPassword:""},{handleSubmit:n,isSubmitting:c,resetForm:d,errors:w}=D({validationSchema:f,initialValues:r}),u=n(k(async p=>{t.value=!0,!await m(p)&&a&&a(),t.value=!1},800)),{value:s}=x("password"),{value:l}=x("confirmPassword");return{password:s,confirmPassword:l,formSubmit:u,isSubmitting:c,isSubmittingDisabled:t,resetForm:d,errors:w}},G={class:"h-[calc(100vh_-_3.25rem)] md:h-[calc(100vh_-_4.625rem)] relative mb-8 w-full flex items-center justify-between"},ts=B({__name:"newPassword",setup(m){const a=C(),t=A(),{handleRenewPassword:f}=t,{password:r,confirmPassword:n,formSubmit:c,isSubmittingDisabled:d,errors:w}=E(async u=>{const s=await f(u);return q(a("signIn")),s});return(u,s)=>{const l=y,p=V,_=I,S=R,v=T;return N(),Z("div",G,[e(l,{class:"left-0 top-0 h-[85%] hidden md:inline-block",src:"pet_images/login/pet-left.png"}),e(l,{class:"right-0 top-0 h-[85%] hidden md:inline-block",src:"pet_images/login/pet-right.png"}),e(v,{class:"flex flex-col absolute left-1/2 transform items-center justify-center -translate-x-1/2 w-4/5 md:w-1/2 gap-y-4"},{default:g(()=>[e(l,{class:"w-[3.0625rem]",src:"pet_images/login/sheld.svg"}),s[4]||(s[4]=b("h1",{class:"text-2xl"}," 設定新密碼 ",-1)),b("form",{class:"w-9/10 md:w-2/3 flex flex-col items-center gap-y-4",onSubmit:s[2]||(s[2]=j((...i)=>o(c)&&o(c)(...i),["prevent"]))},[e(p,{modelValue:o(r),"onUpdate:modelValue":s[0]||(s[0]=i=>h(r)?r.value=i:null),label:"輸入新密碼",placeholder:"請輸入新密碼",disabled:o(d),required:"",class:"w-full"},null,8,["modelValue","disabled"]),e(_,{class:"w-full","input-string":o(r)},null,8,["input-string"]),e(p,{modelValue:o(n),"onUpdate:modelValue":s[1]||(s[1]=i=>h(n)?n.value=i:null),label:"確認新密碼",placeholder:"請再次輸入密碼",disabled:o(d),required:"",class:"w-full","error-message":o(w).confirmPassword},null,8,["modelValue","disabled","error-message"]),e(S,{type:"submit",class:"w-full text-white",label:"送出新密碼按鈕"},{default:g(()=>s[3]||(s[3]=[$(" 確認新密碼 ")])),_:1})],32)]),_:1})])}}});export{ts as default};
