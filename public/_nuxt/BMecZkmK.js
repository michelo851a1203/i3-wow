import{_ as pe,aI as Z,aJ as p,d as me,f as _,aK as G,l as u,aC as fe,V as be,aL as ve,aM as M,b0 as ye,aO as P,L as Me,X as h,o as t,g as I,w as C,a as A,b,m as Q,c,v as S,A as i,B as g,F as he,r as Ie,a5 as Ce,a$ as K,S as Ae,n as Se,t as T,h as X}from"./CYd5hogt.js";import{_ as x}from"./1m7GWKYw.js";import{l as Oe,n as ke,u as Be,r as qe,i as we}from"./DMkMXhoc.js";import{s as ze}from"./Ceo9jh4g.js";import{c as Ve}from"./DvBWbfjg.js";import{u as Y,i as He,b as $e}from"./DtpQx0Ne.js";import{u as je}from"./C9qe5ka0.js";import{u as Ne}from"./Whr4gT_R.js";import{u as Ue}from"./JsBdDeMb.js";import"./D6nfLA0K.js";import"./B08LnwSc.js";import"./CxIZtCgj.js";import"./csYfvOSo.js";import"./DCEB7hob.js";import"./B-DIYZFu.js";import"./DIRaKQ2Y.js";import"./CFvfiu6T.js";import"./CFNrXGhF.js";const s=Z(p.ui.strategy,p.ui.input,He),W=Z(p.ui.strategy,p.ui.inputMenu,$e),Fe=me({components:{HCombobox:Oe,HComboboxButton:ke,HComboboxOptions:Be,HComboboxOption:qe,HComboboxInput:we,UIcon:_,UAvatar:x},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>s.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>W.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>W.default.selectedIcon},disabled:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(s.size).includes(e)}},color:{type:String,default:()=>s.default.color,validator(e){return[...p.ui.colors,...Object.keys(s.color)].includes(e)}},variant:{type:String,default:()=>s.default.variant,validator(e){return[...Object.keys(s.variant),...Object.values(s.color).flatMap(d=>Object.keys(d))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},search:{type:Function,default:void 0},searchAttributes:{type:Array,default:null},searchLazy:{type:Boolean,default:!1},debounce:{type:Number,default:200},popper:{type:Object,default:()=>({})},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:d,slots:w}){const{ui:a,attrs:D}=Y("input",G(e,"ui"),s,G(e,"class")),{ui:z}=Y("inputMenu",G(e,"uiMenu"),W),O=u(()=>fe({},e.popper,z.value.popper)),[m,k]=je(O.value),{size:V,rounded:H}=Ue({ui:a,props:e}),{emitFormBlur:$,emitFormChange:j,inputId:N,color:l,size:U,name:v}=Ne(e,s),o=u(()=>V.value??U.value),B=be(""),f=u({get(){return e.query??B.value},set(n){B.value=n,d("update:query",n)}}),ee=u(()=>{if(e.modelValue)if(e.valueAttribute){const n=L.value.find(r=>r[e.valueAttribute]===e.modelValue);return n?E(n,e.optionAttribute):null}else return["string","number"].includes(typeof e.modelValue)?e.modelValue:E(e.modelValue,e.optionAttribute)}),ae=u(()=>{var r,y;const n=((y=(r=a.value.color)==null?void 0:r[l.value])==null?void 0:y[e.variant])||a.value.variant[e.variant];return ve(M(a.value.base,a.value.form,H.value,a.value.placeholder,a.value.size[o.value],e.padded?a.value.padding[o.value]:"p-0",n==null?void 0:n.replaceAll("{color}",l.value),(q.value||w.leading)&&a.value.leading.padding[o.value],(J.value||w.trailing)&&a.value.trailing.padding[o.value]),e.inputClass)}),q=u(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),J=u(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),ne=u(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),le=u(()=>e.loading&&!q.value?e.loadingIcon:e.trailingIcon||e.icon),ie=u(()=>M(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[o.value])),ue=u(()=>M(a.value.icon.base,l.value&&p.ui.colors.includes(l.value)&&a.value.icon.color.replaceAll("{color}",l.value),a.value.icon.size[o.value],e.loading&&a.value.icon.loading)),te=u(()=>M(a.value.icon.trailing.wrapper,a.value.icon.trailing.padding[o.value])),oe=u(()=>M(a.value.icon.base,l.value&&p.ui.colors.includes(l.value)&&a.value.icon.color.replaceAll("{color}",l.value),a.value.icon.size[o.value],e.loading&&!q.value&&a.value.icon.loading)),F=e.search&&typeof e.search=="function"?ye(e.search,e.debounce):void 0,L=Ve(async()=>F?await F(f.value):e.options||[],[],{lazy:e.searchLazy});function re(n){return n.replace(/[.*+?^${}()|[\]\\]/g,r=>`\\${r}`)}const se=u(()=>{if(!f.value||F)return L.value;const n=re(f.value);return L.value.filter(r=>{var y;return((y=e.searchAttributes)!=null&&y.length?e.searchAttributes:[e.optionAttribute]).some(ge=>{if(["string","number"].includes(typeof r))return String(r).search(new RegExp(n,"i"))!==-1;const R=P(r,ge);return R!=null&&String(R).search(new RegExp(n,"i"))!==-1})})});Me(k,n=>{n?d("open"):(d("close"),$())});function de(n){f.value="",K(e.modelValue)!==K(n)&&(d("update:modelValue",n),d("change",n),j())}function E(n,r){return P(n,r)}function ce(n){f.value=n.target.value}return ze(()=>Ae()),{ui:a,uiMenu:z,attrs:D,name:v,inputId:N,popper:O,trigger:m,container:k,label:ee,isLeading:q,isTrailing:J,inputClass:ae,leadingIconName:ne,leadingIconClass:ue,leadingWrapperIconClass:ie,trailingIconName:le,trailingIconClass:oe,trailingWrapperIconClass:te,filteredOptions:se,query:f,accessor:E,onUpdate:de,onQueryChange:ce}}}),Le={class:"truncate"};function Ee(e,d,w,a,D,z){const O=h("HComboboxInput"),m=_,k=h("HComboboxButton"),V=x,H=h("HComboboxOption"),$=h("HComboboxOptions"),j=h("HCombobox");return t(),I(j,{by:e.by,name:e.name,"model-value":e.modelValue,disabled:e.disabled,nullable:e.nullable,as:"div",class:i(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:C(({open:N})=>[A("div",{class:i(e.uiMenu.trigger)},[b(O,Q({id:e.inputId,name:e.name,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass,autocomplete:"off"},e.attrs,{"display-value":()=>e.query?e.query:e.label,onChange:e.onQueryChange}),null,16,["id","name","required","placeholder","disabled","class","display-value","onChange"]),e.isLeading&&e.leadingIconName||e.$slots.leading?(t(),c("span",{key:0,class:i(e.leadingWrapperIconClass)},[S(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[b(m,{name:e.leadingIconName,class:i(e.leadingIconClass)},null,8,["name","class"])])],2)):g("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(t(),I(k,{key:1,ref:"trigger",class:i(e.trailingWrapperIconClass)},{default:C(()=>[S(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[b(m,{name:e.trailingIconName,class:i(e.trailingIconClass)},null,8,["name","class"])])]),_:3},8,["class"])):g("",!0)],2),N?(t(),c("div",{key:0,ref:"container",class:i([e.uiMenu.container,e.uiMenu.width])},[b(Ce,Q({appear:""},e.uiMenu.transition),{default:C(()=>[A("div",null,[e.popper.arrow?(t(),c("div",{key:0,"data-popper-arrow":"",class:i(Object.values(e.uiMenu.arrow))},null,2)):g("",!0),b($,{static:"",class:i([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:C(()=>[(t(!0),c(he,null,Ie(e.filteredOptions,(l,U)=>(t(),I(H,{key:U,as:"template",value:e.valueAttribute?l[e.valueAttribute]:l,disabled:l.disabled},{default:C(({active:v,selected:o,disabled:B})=>[A("li",{class:i([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,v?e.uiMenu.option.active:e.uiMenu.option.inactive,o&&e.uiMenu.option.selected,B&&e.uiMenu.option.disabled])},[A("div",{class:i(e.uiMenu.option.container)},[S(e.$slots,"option",{option:l,active:v,selected:o},()=>[l.icon?(t(),I(m,{key:0,name:l.icon,class:i([e.uiMenu.option.icon.base,v?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,l.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):l.avatar?(t(),I(V,Q({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...l.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):l.chip?(t(),c("span",{key:2,class:i(e.uiMenu.option.chip.base),style:Se({background:`#${l.chip}`})},null,6)):g("",!0),A("span",Le,T(["string","number"].includes(typeof l)?l:e.accessor(l,e.optionAttribute)),1)])],2),o?(t(),c("span",{key:0,class:i([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[b(m,{name:e.selectedIcon,class:i(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):g("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.query&&!e.filteredOptions.length?(t(),c("p",{key:0,class:i(e.uiMenu.option.empty)},[S(e.$slots,"option-empty",{query:e.query},()=>[X(T(e.uiMenu.default.optionEmpty.label.replace("{query}",e.query)),1)])],2)):e.filteredOptions.length?g("",!0):(t(),c("p",{key:1,class:i(e.uiMenu.empty)},[S(e.$slots,"empty",{query:e.query},()=>[X(T(e.uiMenu.default.empty.label),1)])],2))]),_:3},8,["class"])])]),_:3},16)],2)):g("",!0)]),_:3},8,["by","name","model-value","disabled","nullable","class","onUpdate:modelValue"])}const ia=pe(Fe,[["render",Ee]]);export{ia as default};
