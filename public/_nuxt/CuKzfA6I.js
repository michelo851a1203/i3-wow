import{d as $,R as M,z as v,s as S,l as U,o as i,g as j,w as B,a as o,b as D,C as u,i as R,a4 as E,u as x,y as g,D as m,c as p,F as b,r as h,A as I,U as _,t as w,f as N}from"./CYd5hogt.js";import z from"./Cc-QcOWU.js";import{u as F}from"./x9qqkFeM.js";const A={class:"w-full flex items-center justify-between"},L={class:"flex items-center gap-x-2"},T={class:"border border-orange-400 flex items-center justify-center gap-x-2 rounded-md bg-orange-50 px-2 py-1",for:"distruct_search"},q={class:"px-4"},G=["for"],H=["id","value"],J={class:"cursor-pointer select-none"},K=["for"],O=["id","name","value"],P={class:"cursor-pointer select-none"},Y=$({__name:"RegionModal",props:M({cities:{default:()=>[]}},{isShow:{type:Boolean,default:!1},isShowModifiers:{},modelValue:{default:[]},modelModifiers:{}}),emits:["update:isShow","update:modelValue"],setup(r){const{isInputElement:y}=F(),c=v(r,"isShow"),l=v(r,"modelValue"),f=S(""),k=U(()=>{const d=f.value.replace("台","臺");return d===""?r.cities:r.cities.map(e=>{const n=e.districts.filter(a=>new RegExp(d,"i").test(a.fullName));return{code:e.code,city:e.city,districts:n}}).filter(e=>e.districts.length>0)}),C=d=>{const e=d.target;if(!y(e)||!e.value)return;const n=r.cities.find(a=>a.code===+e.value);n&&n.districts.forEach(a=>{const t=l.value.findIndex(s=>s===a.code&&s!==n.code);t!==-1&&l.value.splice(t,1)})};return(d,e)=>{const n=N,a=z;return i(),j(a,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=t=>c.value=t),overlay:!1,ui:{container:"flex items-center justify-center w-full",base:"rounded-xl shadow-xl border-solid border border-gray-200 overflow-y-auto px-4 py-3 gap-y-4",fullscreen:"w-full h-full md:w-[75vw] md:h-[90vh]",body:{base:"grow"}},fullscreen:""},{default:B(()=>[o("div",A,[o("div",L,[o("label",T,[D(n,{class:"text-orange-600",name:"i-mynaui:search"}),u(o("input",{id:"distruct_search","onUpdate:modelValue":e[0]||(e[0]=t=>R(f)?f.value=t:null),placeholder:"搜尋區域",class:"placeholder:text-orange-400 bg-orange-50 outline-none",type:"text"},null,512),[[E,x(f)]])]),u(o("button",{class:"text-orange-600 hover:text-white border border-orange-600 hover:bg-orange-600 rounded-md px-2 py-1",onClick:e[1]||(e[1]=g(t=>l.value=[],["prevent"]))}," 清除所有項目 ",512),[[m,l.value.length>0]]),u(o("button",{class:"border border-orange-600 rounded-md bg-orange-600 px-2 py-1 text-white",onClick:e[2]||(e[2]=g(t=>c.value=!1,["prevent"]))}," 確定 ",512),[[m,l.value.length>0]])]),o("button",{onClick:e[3]||(e[3]=t=>c.value=!1)}," × ")]),(i(!0),p(b,null,h(x(k),t=>(i(),p("fieldset",{key:t.code,class:I(["flex flex-wrap items-center justify-start gap-2 rounded-md px-4 py-2 border border-orange-300",{"bg-orange-50":l.value.includes(t.code)}])},[o("legend",q,[o("label",{for:`city_${t.code}`,class:"flex items-center gap-x-2"},[u(o("input",{id:`city_${t.code}`,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value=s),type:"checkbox",value:t.code,onChange:C},null,40,H),[[_,l.value]]),o("span",J,w(t.city),1)],8,G)]),(i(!0),p(b,null,h(t.districts.filter(s=>s.code!==t.code),s=>(i(),p("div",{key:s.code,class:"text-black"},[o("label",{for:`district_${t.code}_${s.code}`,class:"flex items-center justify-center gap-x-2"},[u(o("input",{id:`district_${t.code}_${s.code}`,"onUpdate:modelValue":e[5]||(e[5]=V=>l.value=V),name:`district_${t.code}`,type:"checkbox",value:s.code},null,8,O),[[m,!l.value.includes(t.code)],[_,l.value]]),o("span",P,w(s.name),1)],8,K)]))),128))],2))),128))]),_:1},8,["modelValue"])}}});export{Y as _};
