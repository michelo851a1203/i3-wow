import{_ as xe}from"./ByO9Jult.js";import be from"./BAiSaNHi.js";import{d as C,R as W,S as A,z as q,o as v,c as g,a as e,C as N,D as R,B,t as y,b as d,w as I,A as Y,h as z,u as l,s as D,l as k,y as H,F as te,r as se,i as V,f as G,H as J,aa as he,I as ne,m as oe,ab as we,a6 as _e,ac as Se,n as X,ad as le,p as $e,q as Ve,x as ke,G as Me,J as Le,L as Ce,K as Z,ae as Te,g as Ue}from"./CYd5hogt.js";import{S as Ne,s as Re,c as Ie,b as Be,l as Pe}from"./BjsByrvX.js";import{_ as je,a as Fe}from"./Cb6hynOD.js";import{_ as De}from"./CuKzfA6I.js";import{c as ee}from"./CF0ZCrHm.js";import{_ as qe}from"./BvyazkRx.js";import{_ as Oe}from"./BBBjUXBf.js";import{u as ze}from"./x9qqkFeM.js";import{D as _}from"./Dtyavigz.js";import{_ as We}from"./D01-pS-S.js";import{_ as ae}from"./BqhJXTUm.js";import{u as K}from"./CFKnWy4K.js";import{_ as Xe}from"./IhCzvswf.js";import{u as Ee,a as F,t as He}from"./BPqKb5GP.js";import"./1m7GWKYw.js";import"./DtpQx0Ne.js";import"./DMkMXhoc.js";import"./D6nfLA0K.js";import"./B08LnwSc.js";import"./CxIZtCgj.js";import"./Ceo9jh4g.js";import"./csYfvOSo.js";import"./DCEB7hob.js";import"./B-DIYZFu.js";import"./DIRaKQ2Y.js";import"./CFvfiu6T.js";import"./CFNrXGhF.js";import"./CCp9-jSB.js";import"./DvBWbfjg.js";import"./C9qe5ka0.js";import"./Whr4gT_R.js";import"./JsBdDeMb.js";import"./BeNRzrwp.js";import"./B82LM_uF.js";import"./DgjlDNLx.js";import"./DGF_etlt.js";import"./DcAJ6_uj.js";import"./Cl2SVslI.js";import"./CHOj1P8S.js";import"./Cc-QcOWU.js";import"./DdymJfvm.js";import"./DXrSQcim.js";import"./Dp_DNHpP.js";import"./CHoBo5sC.js";const Ae={class:"flex flex-col items-start gap-y-2"},Ge={class:"flex items-center justify-center gap-x-1"},Je={key:0,class:"text-red-500 text-xs"},Ke={class:"w-full flex items-center justify-start gap-x-2"},Qe={key:0,class:"text-gray-400 py-1"},Ye={key:1,class:"py-1"},Ze={key:0,class:"flex items-center justify-center gap-x-2 px-3 py-2"},et=["id"],tt=C({__name:"ServiceTypeSelect",props:W({label:{},isShowLabel:{type:Boolean,default:!0},errorMessage:{default:""},disabled:{type:Boolean},required:{type:Boolean},isFullSize:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const f=Object.values(Ne).map(t=>({iconName:Re[t],value:t,title:t})),n=A(),r=q(a,"modelValue"),u=t=>typeof t!="object"||t===null?!1:"iconName"in t&&"value"in t&&"title"in t;return(t,o)=>{const c=xe,i=be;return v(),g("div",null,[e("div",Ae,[N(e("span",Ge,[t.required?(v(),g("span",Je," * ")):B("",!0),e("span",null,y(t.label),1)],512),[[R,t.isShowLabel]]),e("div",Ke,[d(i,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=s=>r.value=s),options:l(f),"value-attribute":"value","option-attribute":"title",class:Y(["rounded-lg py-1",{"w-full":t.isFullSize}]),"ui-menu":{option:{active:"bg-[#FFF6F3]"}}},{label:I(()=>[r.value===""?(v(),g("span",Qe," 請選擇服務樣目 ")):(v(),g("span",Ye,y(r.value),1))]),option:I(({option:s})=>[u(s)?(v(),g("div",Ze,[d(c,{"icon-name":s.iconName,active:r.value===s.value},null,8,["icon-name","active"]),e("span",{class:Y({"text-[#F27541]":s.value===r.value})},y(s.title),3)])):B("",!0)]),empty:I(()=>o[1]||(o[1]=[z(" 沒有提供服務樣目 ")])),_:1},8,["modelValue","options","class"])])]),N(e("span",{id:l(n),class:"text-sm text-red-500"},y(t.errorMessage),9,et),[[R,t.errorMessage]])])}}}),st={class:"flex flex-col items-start gap-y-2"},nt={class:"flex items-center justify-center gap-x-1"},ot={key:0,class:"text-red-500 text-xs"},lt={class:"border border-gray-300 w-full flex items-center justify-start gap-x-2 rounded-md px-3 py-2"},at={key:0,class:"text-gray-400"},it=["id"],rt=C({__name:"RegionSelect",props:W({label:{},isShowLabel:{type:Boolean,default:!0},errorMessage:{default:""},disabled:{type:Boolean},required:{type:Boolean}},{modelValue:{default:[]},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const n=ee.map(i=>i.districts).flat().reduce((i,s)=>i.set(s.code,s.fullName),new Map),r=A(),u=q(a,"modelValue"),t=D(!1),o=k(()=>{const s=u.value.map(p=>n.get(p)??"");return s.length>1?[...s.slice(0,1),`+${s.length-1}...`]:s}),c=()=>{t.value=!0};return(i,s)=>{const p=De;return v(),g("div",null,[e("div",st,[N(e("span",nt,[i.required?(v(),g("span",ot," * ")):B("",!0),e("span",null,y(i.label),1)],512),[[R,i.isShowLabel]]),e("div",lt,[e("button",{class:"w-full flex items-center justify-start gap-x-2",onClick:H(c,["prevent"])},[u.value.length===0?(v(),g("div",at," 選擇區域(可多選) ")):(v(!0),g(te,{key:1},se(l(o),m=>(v(),g("div",{key:m,class:"rounded-md bg-orange-200 px-2 py-1 text-base"},y(m),1))),128))]),N(e("button",{onClick:s[0]||(s[0]=H(m=>u.value=[],["prevent"]))}," × ",512),[[R,u.value.length>0]]),d(p,{"is-show":l(t),"onUpdate:isShow":s[1]||(s[1]=m=>V(t)?t.value=m:null),modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=m=>u.value=m),cities:l(ee)},null,8,["is-show","modelValue","cities"])])]),N(e("span",{id:l(r),class:"text-sm text-red-500"},y(i.errorMessage),9,it),[[R,i.errorMessage]])])}}}),ut={class:"flex flex-col items-start gap-y-2"},mt={class:"flex items-center justify-center gap-x-1"},ct={key:0,class:"text-red-500 text-xs"},dt={class:"w-full flex items-center justify-start gap-x-2"},pt=["id"],ft=C({__name:"PriceRanger",props:W({label:{},id:{},isShowLabel:{type:Boolean,default:!0},errorMessage:{default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},min:{default:0},max:{default:3e3}},{modelValue:{default:{min:0,max:0}},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const f=A(),n=q(a,"modelValue"),r=k({get:()=>n.value.min,set:t=>{const o=Math.min(Math.max(t,a.min),u.value-1);n.value.min=o}}),u=k({get:()=>n.value.max,set:t=>{const o=Math.max(Math.min(t,a.max),r.value+1);n.value.max=o}});return(t,o)=>{const c=Oe,i=G;return v(),g("div",null,[e("div",ut,[N(e("span",mt,[t.required?(v(),g("span",ct," * ")):B("",!0),e("span",null,y(t.label),1)],512),[[R,t.isShowLabel]]),e("div",dt,[d(c,{modelValue:l(r),"onUpdate:modelValue":o[0]||(o[0]=s=>V(r)?r.value=s:null),label:"起始價格","is-show-label":!1,placeholder:t.min.toString(),disabled:t.disabled,class:"w-1/3 flex-grow"},{default:I(()=>o[2]||(o[2]=[e("div",{class:"flex items-center justify-center bg-gray-200 border-r border-gray-300 px-4"}," $ ",-1)])),_:1},8,["modelValue","placeholder","disabled"]),d(i,{name:"i-heroicons:arrow-right"}),d(c,{modelValue:l(u),"onUpdate:modelValue":o[1]||(o[1]=s=>V(u)?u.value=s:null),label:"結束價格","is-show-label":!1,placeholder:t.max.toString(),disabled:t.disabled,class:"w-1/3 flex-grow"},{default:I(()=>o[3]||(o[3]=[e("div",{class:"flex items-center justify-center bg-gray-200 border-r border-gray-300 px-4"}," $ ",-1)])),_:1},8,["modelValue","placeholder","disabled"])])]),N(e("span",{id:l(f),class:"text-sm text-red-500"},y(t.errorMessage),9,pt),[[R,t.errorMessage]])])}}}),vt=C({__name:"Ball",props:{modelValue:{default:0},modelModifiers:{}},emits:["update:modelValue"],setup(a){const{isDivElement:f}=ze(),n=q(a,"modelValue"),r=J("cursor"),u=D(!1),t=_e(Se),{x:o}=t(),c=he(),{width:i}=ne(c),s=D(0),p=k(()=>`left: ${n.value}px;`),m=$=>{u.value=!0;const h=$.target;f(h)&&(s.value=$.clientX-n.value)},b=()=>{},S=()=>{if(!u.value)return;const $=r.value;if(!f($))return;const h=o.value-s.value,L=Math.max(0,Math.min(h,i.value));n.value=L},M=()=>{u.value=!1},T=k(()=>({mousedown:m,touchstart:b,mouseup:M,mousemove:S,mouseleave:M}));return($,h)=>(v(),g("div",oe({ref_key:"cursor",ref:r,class:"absolute top-1/2 transform -translate-x-1/2 -translate-y-1/2 aspect-square w-6 flex cursor-grab select-none items-center justify-center rounded-full bg-orange-600",style:l(p)},we(l(T))),h[0]||(h[0]=[e("div",{class:"aspect-square w-[4.5] rounded-full bg-white"},null,-1)]),16))}}),gt={class:"w-full space-y-2"},yt={class:"flex select-none items-center justify-between text-gray-600"},xt=C({__name:"RangeBar",props:W({min:{default:0},max:{default:3e3}},{modelValue:{default:{min:0,max:0}},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const f=J("bar"),{width:n}=ne(f),r=q(a,"modelValue"),u=k(()=>{const i=r.value,s=new _(a.max),p=new _(a.min),m=new _(i.max),b=new _(i.min),S=s.minus(p);return S.toNumber()<=0?0:m.minus(b).div(S).toNumber()}),t=k({get:()=>{const i=r.value,s=new _(a.max),p=new _(a.min),m=new _(i.min),b=s.minus(p);return b.toNumber()<=0?0:m.div(b).times(n.value).toNumber()},set:i=>{const s=new _(i),p=new _(a.max),m=new _(a.min),b=p.minus(m),S=s.div(n.value),M=b.times(S).toNumber();r.value.min=Math.round(M)}}),o=k({get:()=>{const i=r.value,s=new _(a.max),p=new _(a.min),m=new _(i.max),b=s.minus(p);return b.toNumber()<=0?0:m.div(b).times(n.value).toNumber()},set:i=>{const s=new _(i),p=new _(a.max),m=new _(a.min),b=p.minus(m),S=s.div(n.value),M=b.times(S).toNumber();r.value.max=Math.round(M)}}),c=k(()=>`left: ${t.value}px;width: ${u.value*100}%;`);return(i,s)=>{const p=vt;return v(),g("div",gt,[e("div",{ref_key:"bar",ref:f,class:"relative h-2 w-full rounded-full bg-gray-300"},[e("div",{class:"absolute h-full rounded-full bg-orange-600",style:X(l(c))},null,4),d(p,{modelValue:l(t),"onUpdate:modelValue":s[0]||(s[0]=m=>V(t)?t.value=m:null)},null,8,["modelValue"]),d(p,{modelValue:l(o),"onUpdate:modelValue":s[1]||(s[1]=m=>V(o)?o.value=m:null)},null,8,["modelValue"])],512),e("div",yt,[e("span",null,"$"+y(i.min.toLocaleString()),1),e("span",null,"$"+y(i.max.toLocaleString()),1)])])}}}),bt={class:"flex items-start justify-center gap-x-4 md:hidden"},ht={class:"flex flex-col grow items-center justify-center"},wt={class:"w-full flex items-center gap-x-2 py-2"},_t={class:"text-xl font-medium"},St={class:"w-full flex items-start justify-between"},$t={class:"text-xl md:font-bold"},Vt={class:"text-gray-400 sm"},kt={class:"text-xl md:font-bold"},Mt=C({__name:"MobileContent",props:{id:{},photoUrl:{},name:{},rating:{},commentCount:{},price:{},isLike:{type:Boolean,default:!1}},setup(a){const f=k(()=>`background-image: url('${a.photoUrl}')`),n=K(),{handleLikeThisPetSitter:r,changeIsLike:u}=n,t=async()=>r(a.id,!a.isLike)?(u(a.id,!a.isLike),!0):!1;return(o,c)=>{const i=le,s=ae,p=G;return v(),g("div",bt,[e("div",{class:"aspect-square max-w-40 w-1/3 self-center rounded-xl bg-cover bg-center bg-no-repeat",style:X(l(f))},null,4),e("div",ht,[e("div",wt,[e("h3",_t,y(o.name),1),d(i,{class:"h-5 w-4",name:"main-icons:medal"}),d(s,{class:"ml-auto flex items-center","is-like":o.isLike,onClick:t},null,8,["is-like"])]),e("div",St,[e("div",null,[e("div",null,[d(p,{class:"text-[#FFC658]",name:"i-ic:baseline-star"}),e("span",$t,y(o.rating),1)]),e("div",Vt,y(o.commentCount)+"條評論 ",1)]),e("div",null,[e("div",null,[e("span",kt,"$"+y(o.price),1),c[0]||(c[0]=z("/次 "))]),c[1]||(c[1]=e("div",{class:"text-gray-400 sm text-center"}," 服務價格 ",-1))])])])])}}}),Lt={class:"space-y-1"},Ct={class:"hidden md:flex items-center gap-x-4 py-2"},Tt={class:"text-xl font-medium"},Ut={key:0,class:"flex items-center gap-x-2"},Nt={class:"flex items-center justify-start gap-x-2 px-3 py-2"},Rt={class:"text-gray-400 xs"},It=C({__name:"MainContent",props:{name:{},serviceCount:{},commentUserImageUrl:{default:""},comment:{default:""}},setup(a){const f=k(()=>`background-image: url('${a.commentUserImageUrl}')`);return(n,r)=>{const u=le;return v(),g("div",Lt,[e("div",Ct,[e("h3",Tt,y(n.name),1),d(u,{class:"h-5 w-4",name:"main-icons:medal"})]),n.serviceCount!==0?(v(),g("div",Ut,[d(u,{class:"h-4 w-4",name:"main-icons:finish"}),e("span",null,"已完成"+y(n.serviceCount)+"次褓母服務",1)])):B("",!0),e("div",Nt,[n.commentUserImageUrl!==""?(v(),g("div",{key:0,class:"w-1/5 max-w-12 aspect-square rounded-full bg-cover bg-center bg-no-repeat",style:X(l(f))},null,4)):B("",!0),e("p",Rt,y(n.comment),1)])])}}}),Bt={class:"flex flex-col min-w-40 items-end gap-y-2 py-3"},Pt={class:"hidden w-full items-center justify-between md:flex"},jt={class:"text-xl font-bold"},Ft={class:"text-gray-400 sm"},Dt={class:"text-xl font-bold"},qt=C({__name:"FunctionBoard",props:{id:{},rating:{},commentCount:{},price:{},isLike:{type:Boolean,default:!1}},setup(a){const f=$e(),n=K(),{handleLikeThisPetSitter:r,changeIsLike:u}=n,t=async()=>r(a.id,!a.isLike)?(u(a.id,!a.isLike),!0):!1;return(o,c)=>{const i=ae,s=G,p=Xe;return v(),g("div",Bt,[d(i,{class:"hidden md:flex items-center","is-like":o.isLike,onClick:t},null,8,["is-like"]),e("div",Pt,[e("div",null,[e("div",null,[d(s,{class:"text-[#FFC658]",name:"i-ic:baseline-star"}),e("span",jt,y(o.rating),1)]),e("div",Ft,y(o.commentCount)+"條評論 ",1)]),e("div",null,[e("div",null,[e("span",Dt,"$"+y(o.price),1),c[1]||(c[1]=z("/次 "))]),c[2]||(c[2]=e("div",{class:"text-gray-400 sm text-center"}," 服務價格 ",-1))])]),d(p,{class:"mt-auto w-full text-white",label:"查看保母細節資訊按鈕",onClick:c[0]||(c[0]=m=>("navigateTo"in o?o.navigateTo:l(Ve))(l(f)({name:"petSitter-id",params:{id:o.id}})))},{default:I(()=>c[3]||(c[3]=[z(" 查看保母 ")])),_:1})])}}}),Ot={class:"flex flex-col md:flex-row items-stretch gap-y-4 md:gap-x-4 md:gap-y-0 rounded-xl bg-white px-6 py-4 shadow-sm"},zt=C({__name:"Card",props:{id:{},name:{},photoUrl:{},serviceCount:{},commentUserImageUrl:{default:""},comment:{default:""},rating:{},commentCount:{},price:{},isLike:{type:Boolean,default:!1}},setup(a){const f=k(()=>`background-image: url('${a.photoUrl}')`);return(n,r)=>{const u=Mt,t=It,o=qt;return v(),g("div",Ot,[e("div",{class:"w-1/2 bg-cover bg-center bg-no-repeat hidden aspect-square max-w-40 self-center rounded-xl md:block",style:X(l(f))},null,4),d(u,{id:n.id,"photo-url":n.photoUrl,name:n.name,rating:n.rating,"comment-count":n.commentCount,price:n.price,"is-like":n.isLike},null,8,["id","photo-url","name","rating","comment-count","price","is-like"]),d(t,{class:"flex-grow",name:n.name,"service-count":n.serviceCount,"comment-user-image-url":n.commentUserImageUrl,comment:n.comment},null,8,["name","service-count","comment-user-image-url","comment"]),d(o,{id:n.id,class:"w-full md:w-1/4",rating:n.rating,"comment-count":n.commentCount,price:n.price,"is-like":n.isLike},null,8,["id","rating","comment-count","price","is-like"])])}}}),Wt=(a,f)=>{const n=D(!1),r=He(Pe),u={serviceType:"",serviceTimePeriod:[null,null],serviceRegionCodeList:[],petType:-1,priceRange:{min:300,max:2200}},{handleSubmit:t,isSubmitting:o,resetForm:c,errors:i}=Ee({validationSchema:r,initialValues:u}),s=t(ke(async h=>{n.value=!0,!await a(h)&&f&&f(),n.value=!1},800)),{value:p}=F("serviceType"),{value:m}=F("serviceTimePeriod"),{value:b}=F("serviceRegionCodeList"),{value:S}=F("petType"),{value:M}=F("priceRange"),T=Object.entries(Ie).map(([h,L])=>({value:+h,title:L})),$=Object.entries(Be).map(([h,L])=>({value:+h,title:L}));return{petSizeOptionList:T,petTypeOptionList:$,serviceType:p,serviceTimePeriod:m,serviceRegionCodeList:b,petType:S,priceRange:M,formSubmit:s,isSubmitting:o,isSubmittingDisabled:n,resetForm:c,errors:i}},Xt={class:"flex flex-wrap md:flex-nowrap items-start justify-center gap-x-6 px-6 sm:px-8 md:px-12 py-8"},Et={class:"w-full md:w-1/4 flex flex-col items-start gap-y-4"},Ht={class:"w-full py-6"},At={class:"w-full md:w-3/4"},Gt={class:"flex items-center justify-between py-3"},Jt={class:"w-full flex flex-col items-center gap-y-4"},Kt={class:"flex items-center justify-end pt-8"},Ws=C({__name:"petSitters",setup(a){const f=K(),{handleSearchPetterSitters:n,toggleOrder:r,resetOrder:u,resetHomeServiceType:t,resetHomeRegionCodeList:o,resetHomeTimeRange:c}=f,{petSitterCount:i,petSitterList:s,orderStatus:p,homeServiceType:m,homeRegionCodeList:b,homeTimeRange:S}=Me(f),{petTypeOptionList:M,serviceType:T,serviceTimePeriod:$,serviceRegionCodeList:h,petType:L,priceRange:U,formSubmit:O,isSubmittingDisabled:P,errors:j}=Wt(async Q=>await n(Q)),ie=J("searchForm"),E=D(1),re=async()=>(r(),await O(),!0);return Le(async()=>{T.value=m.value,$.value=S.value,h.value=b.value,await n({serviceType:m.value,serviceTimePeriod:S.value,serviceRegionCodeList:b.value,petType:-1,priceRange:{min:10,max:2200}})}),Ce([T,$,h,L,U],Te(async()=>{await O()},500)),Z(()=>{u()}),Z(()=>{t(),o(),c()}),(Q,x)=>{const ue=tt,me=je,ce=rt,de=qe,pe=ft,fe=xt,ve=We,ge=zt,ye=Fe;return v(),g("div",Xt,[e("div",Et,[x[8]||(x[8]=e("h2",{class:"px-3 py-2 text-2xl font-medium"}," 找尋適合的褓母/專家 ",-1)),e("form",{ref_key:"searchForm",ref:ie,class:"flex flex-col w-full items-center gap-y-4 rounded-xl bg-white px-4 py-3",onSubmit:x[6]||(x[6]=H((...w)=>l(O)&&l(O)(...w),["prevent"]))},[d(ue,{modelValue:l(T),"onUpdate:modelValue":x[0]||(x[0]=w=>V(T)?T.value=w:null),label:"預約服務",placeholder:"預約服務",disabled:l(P),"error-message":l(j).serviceType,"is-full-size":"",class:"w-full"},null,8,["modelValue","disabled","error-message"]),d(me,{modelValue:l($),"onUpdate:modelValue":x[1]||(x[1]=w=>V($)?$.value=w:null),label:"預約時間",placeholder:"預約時間",disabled:l(P),"error-message":l(j).serviceTimePeriod,"is-full-size":"",class:"w-full"},null,8,["modelValue","disabled","error-message"]),d(ce,{modelValue:l(h),"onUpdate:modelValue":x[2]||(x[2]=w=>V(h)?h.value=w:null),label:"服務區域",placeholder:"選擇區域(可多選)",class:"w-full",disabled:l(P),"error-message":l(j).serviceRegionCodeList},null,8,["modelValue","disabled","error-message"]),d(de,{modelValue:l(L),"onUpdate:modelValue":x[3]||(x[3]=w=>V(L)?L.value=w:null),label:"寵物種類",options:l(M),disabled:l(P),"is-full-size":"",class:"w-full","error-message":l(j).petType,"no-value":-1,placeholder:"請選擇寵物種類(可多選)"},null,8,["modelValue","options","disabled","error-message"]),d(pe,{modelValue:l(U),"onUpdate:modelValue":x[4]||(x[4]=w=>V(U)?U.value=w:null),min:0,max:3e3,label:"價格",disabled:l(P),class:"w-full","error-message":l(j).priceRange},null,8,["modelValue","disabled","error-message"]),e("div",Ht,[d(fe,{modelValue:l(U),"onUpdate:modelValue":x[5]||(x[5]=w=>V(U)?U.value=w:null),min:0,max:3e3},null,8,["modelValue"])])],544)]),e("div",At,[e("div",Gt,[e("span",null,"搜尋結果共 "+y(l(i).toLocaleString())+" 位",1),d(ve,{order:l(p),onClick:re},null,8,["order"])]),x[9]||(x[9]=e("div",{class:"hidden w-full"}," 廣告欄位 ",-1)),e("section",Jt,[(v(!0),g(te,null,se(l(s),w=>(v(),Ue(ge,oe({key:w.id,class:"w-full",ref_for:!0},w),null,16))),128))]),e("div",Kt,[d(ye,{modelValue:l(E),"onUpdate:modelValue":x[7]||(x[7]=w=>V(E)?E.value=w:null),max:5,"page-count":10,total:100},null,8,["modelValue"])])])])}}});export{Ws as default};
