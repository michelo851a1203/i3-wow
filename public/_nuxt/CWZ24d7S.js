import{_ as ie}from"./CPz06D4e.js";import{_ as R}from"./BKjW2vGI.js";import{_ as z}from"./IhCzvswf.js";import{T as de,l as L,s as U,x as O,d as B,G as Z,L as ue,o as P,c as $,a as t,h as I,t as j,b as a,u as e,i as _,C as F,D as G,w as S,A as K,y as M,n as me,f as H,v as ce,g as E,J as fe}from"./CYd5hogt.js";import{u as Q}from"./BH6_UoY5.js";import{u as pe,o as be,s as A}from"./BeNRzrwp.js";import{I as ge,m as we}from"./B9ZLIOnV.js";import{u as W,a as N,t as X}from"./BPqKb5GP.js";import{u as xe}from"./ipEDR5wJ.js";import{_ as ve}from"./BVSNKv9u.js";import{_ as ye}from"./CpiCOp1G.js";import{_ as _e}from"./Dp_DNHpP.js";import"./BjsByrvX.js";import"./CHoBo5sC.js";import"./BMigu0w3.js";const Se=()=>{const p=o=>new Promise(i=>setTimeout(i,o));return{getMemberInfo:async()=>(await p(500),{name:"John Doe",firstName:"John",lastName:"Doe",mobilePhone:"0989712345",email:"ilovei3BData@gmail.com",identity:ge.AuditingPetSitter})}},Y=de("useMemberInfoStore",()=>({memberInfo:null}),p=>{const{customTypeError:l,fatalError:o}=pe(),{getMemberInfo:i}=Se(),m=async()=>{try{const u=await i();return p.memberInfo=u,!0}catch(u){return l(u)||o(u),!1}};return{memberInfo:L(()=>p.memberInfo),handleGetMemberInfo:m}}),Pe=(p,l)=>{const o=U(!1),i=X(we),m={name:"",firstName:"",lastName:"",mobilePhone:"",email:""},{handleSubmit:u,isSubmitting:x,resetForm:d,errors:c}=W({validationSchema:i,initialValues:m}),b=u(O(async y=>{o.value=!0,!await p(y)&&l&&l(),o.value=!1},800)),{value:r}=N("name"),{value:f}=N("firstName"),{value:v}=N("lastName"),{value:n}=N("mobilePhone"),{value:T}=N("email");return{name:r,firstName:f,lastName:v,mobilePhone:n,email:T,formSubmit:b,isSubmitting:x,isSubmittingDisabled:o,resetForm:d,errors:c}},Ve={class:"w-full flex items-center justify-center gap-x-2"},Ie={class:"w-full flex items-start gap-x-2"},Ne={class:"flex items-start justify-center gap-x-2"},$e={class:"flex items-center justify-center gap-x-4"},he="褓母(審核中)",D="phoneValidate",Ce=B({__name:"InfoSection",setup(p){const l=Q(),{handleUpdatePersonalInfo:o,handlePersonalInfoPhoneValidate:i,handlePersonalInfoPhoneValidateCode:m}=l,u=Y(),{memberInfo:x}=Z(u),{name:d,firstName:c,lastName:b,mobilePhone:r,email:f,formSubmit:v,isSubmittingDisabled:n,resetForm:T,errors:y}=Pe(async g=>await o(g)),{reVerifyCodeCount:k,getKeyTimeStamp:ee,startCounter:se,resetCounter:te}=xe(),V=U(!1),h=U(""),oe=L(()=>V.value?`再次驗證(${k.value})`:"驗證"),le=async()=>V.value?k.value>0||!await i(r.value)?!1:(te(D),!0):await i(r.value)?(V.value=!0,re(),!0):!1,re=()=>{const g=ee(D);se(g,D)},ae=async()=>await m(h.value)?(h.value="",V.value=!1,!0):!1;return ue(x,g=>{g!==null&&(d.value=g.name,c.value=g.firstName,b.value=g.lastName,r.value=g.mobilePhone,f.value=g.email)},{immediate:!0}),(g,s)=>{const C=ie,q=R,ne=z;return P(),$("form",{class:"flex flex-col items-start gap-y-4 px-4 py-3",onSubmit:s[6]||(s[6]=M((...w)=>e(v)&&e(v)(...w),["prevent"]))},[t("div",{class:"w-full"},[s[7]||(s[7]=t("p",null,[t("span",{class:"text-red-500"},"*"),I(" 身份 ")],-1)),t("div",{class:"w-full px-4 py-3 text-orange-800"},j(he))]),a(C,{modelValue:e(d),"onUpdate:modelValue":s[0]||(s[0]=w=>_(d)?d.value=w:null),class:"w-1/2",label:"暱稱",placeholder:"請輸入暱稱",disabled:e(n),required:!0,"error-message":e(y).name},null,8,["modelValue","disabled","error-message"]),s[11]||(s[11]=t("span",{class:"text-gray-400 text-sm"},"暱稱為您在本服務中顧客對您之稱呼，可自行修正。",-1)),t("div",Ve,[a(C,{modelValue:e(c),"onUpdate:modelValue":s[1]||(s[1]=w=>_(c)?c.value=w:null),label:"真實姓氏",placeholder:"請輸入電子信箱",disabled:e(n),required:!0,class:"w-1/2"},null,8,["modelValue","disabled"]),a(C,{modelValue:e(b),"onUpdate:modelValue":s[2]||(s[2]=w=>_(b)?b.value=w:null),label:"真實名字",placeholder:"請輸入電子信箱",disabled:e(n),required:!0,class:"w-1/2"},null,8,["modelValue","disabled"])]),F(t("div",{class:"mt-[-2] w-full text-sm text-red-500"},j(e(y).firstName||e(y).lastName),513),[[G,e(y).firstName||e(y).lastName]]),s[12]||(s[12]=t("span",{class:"text-gray-400 text-sm"},"使用本站服務需實名制認證，請填寫身分證之真實姓名。",-1)),t("div",Ie,[a(C,{modelValue:e(r),"onUpdate:modelValue":s[3]||(s[3]=w=>_(r)?r.value=w:null),label:"手機號碼",placeholder:"請輸入手機號碼（用於預約聯絡）",disabled:e(n),required:!0,class:"flex-grow","error-message":e(y).mobilePhone},null,8,["modelValue","disabled","error-message"]),a(q,{class:K(["mt-8 flex items-center justify-center rounded-xl",{"text-orange-600 border-solid border-[1px] border-orange-600":!e(V)||e(V)&&e(k)===0,"text-gray-300 border-solid border-[1px] border-gray-300":e(V)&&e(k)>0}]),label:"驗證手機號碼按鈕",onClick:M(le,["prevent"])},{default:S(()=>[I(j(e(oe)),1)]),_:1},8,["class"])]),F(t("div",Ne,[a(C,{modelValue:e(h),"onUpdate:modelValue":s[4]||(s[4]=w=>_(h)?h.value=w:null),"is-show-label":!1,label:"手機驗證碼",placeholder:"請輸入四位數驗證碼",disabled:e(n),class:"flex-grow","error-message":e(h).length!==4?"請輸入四位數驗證碼":void 0},null,8,["modelValue","disabled","error-message"]),a(q,{class:"flex items-center justify-center rounded-xl border-solid border-[1px] border-orange-600 text-orange-600 min-w-24",label:"送出手機驗證碼按鈕",onClick:M(ae,["prevent"])},{default:S(()=>s[8]||(s[8]=[I(" 送出 ")])),_:1})],512),[[G,e(V)]]),s[13]||(s[13]=t("span",{class:"text-gray-400 text-sm"},"相關認證、預約等簡訊將以此手機號通知，請填寫常用手機號碼。",-1)),a(C,{modelValue:e(f),"onUpdate:modelValue":s[5]||(s[5]=w=>_(f)?f.value=w:null),type:"email",class:"w-full",label:"電子信箱",placeholder:"請輸入電子信箱（用於預約聯絡）",disabled:e(n),"error-message":e(y).email,required:!0},null,8,["modelValue","disabled","error-message"]),s[14]||(s[14]=t("span",{class:"text-gray-400 text-sm"},"信箱將發送相關訊息與服務通知，請務必填寫正確。",-1)),t("div",$e,[a(q,{class:"flex items-center justify-center rounded-xl border-solid border-[1px] border-orange-600 text-orange-600 min-w-24",label:"重設個人資料欄位按鈕",onClick:M(e(T),["prevent"])},{default:S(()=>s[9]||(s[9]=[I(" 重設 ")])),_:1},8,["onClick"]),a(ne,{type:"submit",class:"min-w-24 text-white",label:"儲存個人資料按鈕"},{default:S(()=>s[10]||(s[10]=[I(" 儲存 ")])),_:1})])],32)}}}),Me={class:"flex flex-col items-center justify-start gap-y-4 px-4 pt-6"},ke={key:1,class:"w-1/2 aspect-square flex items-center justify-center rounded-full bg-[#C2C1BB]"},Be=B({__name:"UploadAvatar",props:{avatar:{default:""}},setup(p){return(l,o)=>{const i=H,m=R;return P(),$("div",Me,[l.avatar!==""?(P(),$("div",{key:0,class:"w-1/2 aspect-square rounded-full bg-cover bg-center bg-no-repeat",style:me(`background-image: url('${l.avatar}')`)},null,4)):(P(),$("div",ke,[a(i,{class:"aspect-square text-5xl",name:"i-octicon:person-24"})])),a(m,{label:"上傳個人照片按鈕",class:"flex items-center justify-center rounded-xl border-solid border-[1px] border-orange-600 text-orange-600"},{default:S(()=>o[0]||(o[0]=[I(" 上傳照片 ")])),_:1}),o[1]||(o[1]=t("div",{class:"text-sm font-light"},[t("p",null,"檔案大小:最大1MB"),t("p",null,"檔案限制：JPEG、PNG")],-1))])}}}),Te=be({password:A().min(6,"長度為6-18個字元").max(18,"長度為6-18個字元").regex(/(?=.*[A-Z]).*/g,"包含1個大寫字母").regex(/(?=.*\d).*/g,"包含1個數字"),newPassword:A().min(6,"長度為6-18個字元").max(18,"長度為6-18個字元").regex(/(?=.*[A-Z]).*/g,"包含1個大寫字母").regex(/(?=.*\d).*/g,"包含1個數字"),confirmNewPassword:A().min(6,"長度為6-18個字元").max(18,"長度為6-18個字元").regex(/(?=.*[A-Z]).*/g,"包含1個大寫字母").regex(/(?=.*\d).*/g,"包含1個數字")}),je=(p,l)=>{const o=U(!1),i=X(Te),m={password:"",newPassword:"",confirmNewPassword:""},{handleSubmit:u,isSubmitting:x,resetForm:d,errors:c}=W({validationSchema:i,initialValues:m}),b=u(O(async n=>{o.value=!0,!await p(n)&&l&&l(),o.value=!1},800)),{value:r}=N("password"),{value:f}=N("newPassword"),{value:v}=N("confirmNewPassword");return{password:r,newPassword:f,confirmNewPassword:v,formSubmit:b,isSubmitting:x,isSubmittingDisabled:o,resetForm:d,errors:c}},Ue={class:"w-full flex items-end gap-x-4"},qe=B({__name:"ResetPassword",setup(p){const l=Q(),{handleResetPassword:o}=l,{password:i,newPassword:m,confirmNewPassword:u,formSubmit:x,isSubmittingDisabled:d,errors:c}=je(async b=>await o(b));return(b,r)=>{const f=ve,v=R;return P(),$("form",{class:"flex flex-col items-start gap-y-4 px-4 py-3",onSubmit:r[3]||(r[3]=M((...n)=>e(x)&&e(x)(...n),["prevent"]))},[a(f,{modelValue:e(i),"onUpdate:modelValue":r[0]||(r[0]=n=>_(i)?i.value=n:null),type:"email",class:"w-full",label:"舊密碼確認",placeholder:"請輸入舊密碼",disabled:e(d),required:!0,"error-message":e(c).password},null,8,["modelValue","disabled","error-message"]),a(f,{modelValue:e(m),"onUpdate:modelValue":r[1]||(r[1]=n=>_(m)?m.value=n:null),type:"email",class:"w-full",label:"新密碼",placeholder:"請輸入 8-30 個英數文字，避免特殊符號",disabled:e(d),required:!0,"error-message":e(c).newPassword},null,8,["modelValue","disabled","error-message"]),t("div",Ue,[a(f,{modelValue:e(u),"onUpdate:modelValue":r[2]||(r[2]=n=>_(u)?u.value=n:null),type:"email",class:"flex-grow",label:"新密碼確認",placeholder:"請再次輸入新密碼",disabled:e(d),required:!0,"error-message":e(c).confirmNewPassword},null,8,["modelValue","disabled","error-message"]),a(v,{type:"submit",class:"flex items-center justify-center rounded-xl border-solid border-[1px] border-orange-600 text-orange-600",label:"變更密碼確定按鈕"},{default:S(()=>r[4]||(r[4]=[I(" 變更密碼 ")])),_:1})])],32)}}}),Ae={class:"flex items-center justify-between px-4 py-3"},De={class:"flex items-center justify-center gap-x-4"},Re={class:"flex items-center justify-center gap-x-2"},Le=B({__name:"ThirdPartyAccountBinding",props:{label:{},title:{},bindingToken:{default:""}},emits:["update:binding"],setup(p){return(l,o)=>{const i=H,m=z,u=_e;return P(),$("div",Ae,[t("div",De,[ce(l.$slots,"default"),t("span",null,j(l.title),1)]),l.bindingToken===""?(P(),E(m,{key:0,label:`綁定${l.label}帳號按鈕`,class:"text-white",onClick:o[0]||(o[0]=M(x=>l.$emit("update:binding"),["prevent"]))},{default:S(()=>[t("div",Re,[o[1]||(o[1]=t("span",null," 綁定帳號 ",-1)),a(i,{class:"h-4 w-4",name:"i-zondicons:add-outline"})])]),_:1},8,["label"])):(P(),E(u,{key:1,label:`解除綁定${l.label}帳號按鈕`,class:"text-orange-600"},{default:S(()=>o[2]||(o[2]=[I(" 解綁 ")])),_:1},8,["label"]))])}}}),Fe={class:"w-full space-y-4"},Ge={class:"w-full rounded-xl bg-white"},Ee={class:"flex items-stretch justify-center"},Je={class:"w-full rounded-xl bg-white"},ze={class:"w-full rounded-xl bg-white"},Oe={class:"flex flex-col items-center justify-center gap-y-4 px-4 py-3"},J="",is=B({__name:"index",setup(p){const l=Y(),{memberInfo:o}=Z(l),{handleGetMemberInfo:i}=l,m=L(()=>"尚無 Line 帳號"),u=()=>{console.group("%c test","color: yellow;"),console.log("binding"),console.groupEnd()};return fe(async()=>{await i()}),(x,d)=>{var n;const c=Ce,b=Be,r=qe,f=ye,v=Le;return P(),$("div",Fe,[t("div",Ge,[d[0]||(d[0]=t("div",{class:"px-4 py-6 border-b border-solid border-gray-200"}," 個人資料 ",-1)),t("div",Ee,[a(c,{class:"w-3/4 border-r border-solid border-gray-100"}),a(b,{avatar:((n=e(o))==null?void 0:n.avatarImageUrl)??"",class:"w-1/4"},null,8,["avatar"])])]),t("div",Je,[d[1]||(d[1]=t("div",{class:"px-4 py-6 border-b border-solid border-gray-200"}," 密碼設定 ",-1)),a(r,{class:"w-2/3"})]),t("div",ze,[d[2]||(d[2]=t("div",{class:"px-4 py-6 border-b border-solid border-gray-300"}," 第三方登入管理 ",-1)),t("div",Oe,[a(v,{"binding-token":J,class:"w-full",label:"Line",title:e(m),"onUpdate:binding":u},{default:S(()=>[t("div",{class:K(["scale-120 transform",{"opacity-50":J===""}])},[a(f)],2)]),_:1},8,["title"])])])])}}});export{is as default};
