import{_ as Ce}from"./CkECVEz0.js";import{o as De,_ as Pe}from"./C4j0qmQo.js";import{_ as ve}from"./BvyazkRx.js";import{_ as be,a as Le}from"./Cb6hynOD.js";import{_ as ce}from"./Dp_DNHpP.js";import{d as N,o as S,c as $,a as s,F as G,r as W,A as ue,t as g,u as e,e as ne,b as p,w as V,y as P,l as R,g as j,h as O,B as M,R as ye,z as _e,C as H,U as Ue,f as ge,s as B,x as J,G as q,L as K,i as C,V as me,D as re,n as Ee,J as Ne,K as Oe}from"./CYd5hogt.js";import{o as F}from"./Dm1C3zq8.js";import{_ as Q}from"./IhCzvswf.js";import{_ as Fe}from"./G_68Gw82.js";import{A as E,d as Me,u as z}from"./BH6_UoY5.js";import{_ as Be}from"./DfM4NYzT.js";import{_ as Y}from"./BKjW2vGI.js";import{_ as je}from"./BVCmbStn.js";import{_ as Re}from"./wgxmNlY0.js";import{_ as ze}from"./CCxXcF8T.js";import{_ as xe}from"./CPz06D4e.js";import{_ as Se}from"./BBBjUXBf.js";import{P as A,p as Ae,a as we,S as Ie,b as qe,c as Ye}from"./BjsByrvX.js";import{u as X,a as U,t as Z}from"./BPqKb5GP.js";import{b as pe,o as ee,n as ae,a as de,s as I,l as He}from"./BeNRzrwp.js";import{c as fe}from"./CF0ZCrHm.js";import{u as he}from"./CFKnWy4K.js";import{_ as Ge}from"./B3dFsN5O.js";import We from"./Cc-QcOWU.js";import{_ as Je}from"./Dp7uII68.js";import"./BAiSaNHi.js";import"./1m7GWKYw.js";import"./DtpQx0Ne.js";import"./DMkMXhoc.js";import"./D6nfLA0K.js";import"./B08LnwSc.js";import"./CxIZtCgj.js";import"./Ceo9jh4g.js";import"./csYfvOSo.js";import"./DCEB7hob.js";import"./B-DIYZFu.js";import"./DIRaKQ2Y.js";import"./CFvfiu6T.js";import"./CFNrXGhF.js";import"./CCp9-jSB.js";import"./DvBWbfjg.js";import"./C9qe5ka0.js";import"./Whr4gT_R.js";import"./JsBdDeMb.js";import"./B82LM_uF.js";import"./DgjlDNLx.js";import"./DGF_etlt.js";import"./DcAJ6_uj.js";import"./Cl2SVslI.js";import"./CHOj1P8S.js";import"./BMigu0w3.js";import"./CHoBo5sC.js";import"./DdymJfvm.js";import"./DXrSQcim.js";import"./DiniTw7G.js";const Ke={class:"table-auto"},Qe={class:"px-3 py-2"},Xe={class:"px-3 py-2"},Ze={class:"px-3 py-2"},et={class:"px-3 py-2"},tt={class:"px-3 py-2"},st={class:"px-3 py-2"},it=N({__name:"OrderTable",props:{orderList:{}},emits:["update:showDetail"],setup(_){return(f,u)=>{const m=ce;return S(),$("table",Ke,[u[1]||(u[1]=s("thead",null,[s("tr",{class:"rounded-t-xl bg-gray-100 text-left"},[s("th",{class:"px-3 py-2"}," 預約編號 "),s("th",{class:"px-3 py-2"}," 時間 "),s("th",{class:"px-3 py-2"}," 飼主帳號 "),s("th",{class:"px-3 py-2"}," 預約狀態 "),s("th",{class:"px-3 py-2"}," 服務項目 "),s("th",{class:"px-3 py-2"}," 動作 ")])],-1)),s("tbody",null,[(S(!0),$(G,null,W(f.orderList,(i,l)=>(S(),$("tr",{key:i.ticketCode,class:ue(["border-b border-solid border-gray-200",[l%2===1?"bg-gray-100":""]])},[s("td",Qe,g(i.ticketCode),1),s("td",Xe,g(e(ne)(i.orderTime,"YYYY/MM/DD HH:mm ")),1),s("td",Ze,g(i.name),1),s("td",et,g(e(F).get(i.orderStatus)),1),s("td",tt,g(i.serviceItem),1),s("td",st,[p(m,{label:`查看更多關於:訂單編號${i.ticketCode}的訊息按鈕`,onClick:P(t=>f.$emit("update:showDetail",i.ticketCode),["prevent"])},{default:V(()=>u[0]||(u[0]=[s("span",{class:"underline"},"查看更多",-1)])),_:2},1032,["label","onClick"])])],2))),128))])])}}}),lt={class:"flex items-stretch justify-center gap-x-4"},ot={class:"w-1/4 flex items-center justify-between rounded-xl bg-gray-100 px-6 py-4"},rt={class:"flex flex-col items-start justify-around gap-y-2"},nt={class:"text-lg font-medium"},at={class:"w-1/4 flex flex-col items-start gap-y-2 rounded-xl bg-gray-100 px-6 py-4"},dt={class:"text-lg font-medium"},ct={class:"w-1/4 flex flex-col items-start gap-y-2 rounded-xl bg-gray-100 px-6 py-4"},ut={class:"text-lg font-medium"},mt={class:"w-1/4 flex flex-col items-start gap-y-2 rounded-xl bg-gray-100 px-6 py-4"},pt={class:"text-lg font-medium"},ft=N({__name:"PaymentBoard",props:{status:{},price:{},serviceName:{},keeperPhone:{}},emits:["update:payTheBill","update:comment"],setup(_){const f=R(()=>_.status===E.PendingForReply||_.status===E.ReservedPay),u=R(()=>_.status===E.FinishedNoComment);return(m,i)=>{const l=Q,t=Fe;return S(),$("div",lt,[s("div",ot,[s("div",rt,[i[2]||(i[2]=s("span",null,"預約狀態",-1)),s("span",nt,g(e(Me).get(m.status)),1)]),e(f)?(S(),j(l,{key:0,class:"text-white",label:"付款按鈕",onClick:i[0]||(i[0]=P(d=>m.$emit("update:payTheBill"),["prevent"]))},{default:V(()=>i[3]||(i[3]=[O(" 付款 ")])),_:1})):M("",!0),e(u)?(S(),j(t,{key:1,class:"text-orange-600",label:"評論按鈕",onClick:i[1]||(i[1]=P(d=>m.$emit("update:comment"),["prevent"]))},{default:V(()=>i[4]||(i[4]=[O(" 我要評價 ")])),_:1})):M("",!0)]),s("div",at,[i[5]||(i[5]=s("span",null,"預約服務",-1)),s("span",dt,g(m.serviceName),1)]),s("div",ct,[i[6]||(i[6]=s("span",null,"預約金額",-1)),s("span",ut,"NT$ "+g(m.price.toLocaleString()),1)]),s("div",mt,[i[7]||(i[7]=s("span",null,"飼主聯絡資料",-1)),s("span",pt,g(m.keeperPhone),1)])])}}}),vt={class:"w-full"},bt={class:"flex flex-col gap-y-4"},yt={class:"flex items-center justify-center gap-x-4"},_t={class:"flex flex-col gap-y-2"},gt=["for"],xt=["onUpdate:modelValue"],St=N({__name:"Pet",props:ye({disabled:{type:Boolean,default:!1},petTypeOptionList:{},petSizeOptionList:{}},{modelValue:{default:[]},modelModifiers:{}}),emits:["update:modelValue"],setup(_){const f=_e(_,"modelValue"),u=i=>{const l=f.value.find(v=>v.id===i);if(!l)return;const t={id:1,name:"",price:0,isDeleteabe:!0};if(!l.extraServiceList){l.extraServiceList=[t];return}const d=Math.max(...l.extraServiceList.map(v=>v.id))+1;l.extraServiceList.push({id:d,name:"",price:0,isDeleteabe:!0})},m=(i,l)=>{const t=f.value.find(v=>v.id===i);if(!t||!t.extraServiceList)return;const d=t.extraServiceList.findIndex(v=>v.id===l);d!==-1&&t.extraServiceList.splice(d,1)};return(i,l)=>{const t=ze,d=xe,v=Se,b=ge,n=ce,a=Y;return S(!0),$(G,null,W(f.value,(r,h)=>(S(),$("div",{key:r.id,class:"flex flex-col gap-y-2"},[s("h4",vt," 第"+g(h+1)+"隻寵物 ",1),s("div",bt,[p(t,{modelValue:r.petType,"onUpdate:modelValue":o=>r.petType=o,label:"寵物種類","is-show-label":!1,options:i.petTypeOptionList,disabled:i.disabled,"is-full-size":"",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),s("div",yt,[p(d,{id:"account",modelValue:r.name,"onUpdate:modelValue":o=>r.name=o,"is-show-label":!1,label:"寵物名字",placeholder:"請輸入寵物姓名",class:ue({"w-1/2":r.petType===e(A).Dog,"w-full":r.petType!==e(A).Dog}),disabled:i.disabled,required:""},null,8,["modelValue","onUpdate:modelValue","class","disabled"]),r.petType===e(A).Dog?(S(),j(t,{key:0,id:"petSize",modelValue:r.size,"onUpdate:modelValue":o=>r.size=o,label:"寵物尺寸","is-show-label":!1,options:i.petSizeOptionList,disabled:i.disabled,"is-full-size":"",class:"w-1/2"},null,8,["modelValue","onUpdate:modelValue","options","disabled"])):M("",!0)]),s("div",_t,[l[2]||(l[2]=s("h5",null,"額外服務細項",-1)),(S(!0),$(G,null,W(r.extraServiceList??[],o=>(S(),$("label",{key:o.id,class:"flex items-center justify-center gap-x-4",for:`${r.id}_extra_${o.id}`},[H(s("input",{"onUpdate:modelValue":c=>o.isChecked=c,type:"checkbox"},null,8,xt),[[Ue,o.isChecked]]),p(d,{id:`${r.id}_extra_${o.id}`,modelValue:o.name,"onUpdate:modelValue":c=>o.name=c,"is-show-label":!1,label:"細項名稱",placeholder:"請輸入細項名稱",disabled:i.disabled,required:"",class:"flex-grow"},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),p(v,{label:"服務細項金額","is-show-label":!1,placeholder:"金額",disabled:i.disabled,class:"w-32"},{default:V(()=>l[0]||(l[0]=[s("div",{class:"flex items-center justify-center bg-gray-200 border-r border-gray-300 px-2"}," NT$ ",-1)])),_:1},8,["disabled"]),o.isDeleteabe?(S(),j(n,{key:0,label:`刪除${o.name}服務項目按鈕`,class:"flex items-center justify-center gap-x-2 text-orange-600",onClick:P(c=>m(r.id,o.id),["prevent"])},{default:V(()=>[p(b,{name:"i-heroicons:trash"})]),_:2},1032,["label","onClick"])):M("",!0)],8,gt))),128)),p(a,{label:"新增額外服務細項按鈕",class:"w-full flex items-center justify-center gap-x-2 rounded-xl text-orange-600",onClick:P(o=>u(r.id),["prevent"])},{default:V(()=>[l[1]||(l[1]=s("span",null," 額外服務細項 ",-1)),p(b,{class:"text-orange-600",name:"i-heroicons-plus"})]),_:2},1032,["onClick"])])])]))),128)}}}),wt=Ae.extend({isChecked:pe().optional(),isDeleteabe:pe().optional()}),ht=ee({id:ae().int().nonnegative("請輸入正整數或0"),petType:de(A),name:I().min(1,"請輸入寵物姓名"),size:de(we).optional(),extraServiceList:wt.array().optional()}),$e=ee({petEditList:ht.array().min(1,"至少要有一隻寵物")}),ke=ee({serviceType:de(Ie).or(He("")).optional(),serviceTimePeriod:ae().nullable().array().length(2).optional(),serviceCityName:I().optional(),serviceRegionName:I().optional(),serviceAddress:I(),price:ae().int().nonnegative("請輸入正整數或0")}),Ve=ee({note:I().min(1,"請填寫備注").max(500,"備註不可以超過 500 字")}),$t=Ve.merge($e).merge(ke),kt=(_,f)=>{const u=B(!1),m=Z($e),i={petEditList:[]},{handleSubmit:l,isSubmitting:t,resetForm:d,errors:v}=X({validationSchema:m,initialValues:i}),b=l(J(async a=>{u.value=!0,!await _(a)&&f&&f(),u.value=!1},800)),{value:n}=U("petEditList");return{petEditList:n,formSubmit:b,isSubmitting:t,isSubmittingDisabled:u,resetForm:d,errors:v}},Vt={class:"flex flex-col gap-y-2"},Tt={key:0,class:"text-red-500 sm"},Ct={class:"sticky bottom-0"},Dt={class:"flex items-center justify-end gap-x-4 bg-white px-4 py-3 border-t border-gray-300"},Pt=N({__name:"First",emits:["update:tempSave","update:cancel"],setup(_,{emit:f}){const u=f,m=z(),{currentEditDetail:i}=q(m),{petEditList:l,formSubmit:t,isSubmittingDisabled:d,resetForm:v,errors:b}=kt(async o=>(u("update:tempSave",o),!0)),n=R({get:()=>l.value.length,set:o=>{const c=l.value,k=c.length;if(o>=k){let D=k===0?0:Math.max(...c.map(w=>w.id));for(let w=0;w<o-k;w++)D++,l.value.push({id:D,petType:A.Dog,name:"",size:we.MEDIUM,extraServiceList:[]});return}l.value=l.value.filter((D,w)=>w<o)}}),a=Object.entries(qe).map(([o,c])=>({value:+o,title:c})),r=Object.entries(Ye).map(([o,c])=>({value:+o,title:c})),h=()=>{v(),u("update:cancel")};return K(i,o=>{if(o===null)return;const c=o.petEditList;l.value=c}),(o,c)=>{const k=Re,D=St,w=Y,y=Q;return S(),$("form",{class:"flex flex-col gap-y-2 px-4",onSubmit:c[2]||(c[2]=P((...x)=>e(t)&&e(t)(...x),["prevent"]))},[p(k,{modelValue:e(n),"onUpdate:modelValue":c[0]||(c[0]=x=>C(n)?n.value=x:null),required:"",disabled:e(d),min:1},null,8,["modelValue","disabled"]),c[5]||(c[5]=s("div",{class:"flex items-start gap-x-1"},[s("span",{class:"text-red-500 sm"},"*"),s("span",null,"寵物資訊")],-1)),s("div",Vt,[p(D,{modelValue:e(l),"onUpdate:modelValue":c[1]||(c[1]=x=>C(l)?l.value=x:null),class:"w-full","pet-type-option-list":e(a),"pet-size-option-list":e(r),disabled:e(d)},null,8,["modelValue","pet-type-option-list","pet-size-option-list","disabled"])]),e(b).petEditList?(S(),$("div",Tt,g(e(b).petEditList),1)):M("",!0),s("div",Ct,[s("div",Dt,[p(w,{label:"重設個人資料欄位按鈕",class:"border border-orange-600 min-w-24 flex items-center justify-center rounded-xl text-orange-600",onClick:P(h,["prevent"])},{default:V(()=>c[3]||(c[3]=[O(" 取消 ")])),_:1}),p(y,{type:"submit",label:"註冊會員送出按鈕",class:"min-w-24 text-white"},{default:V(()=>c[4]||(c[4]=[O(" 下一步 ")])),_:1})])])],32)}}}),Lt=(_,f)=>{const u=B(!1),m=Z(ke),i={serviceType:"",serviceTimePeriod:[null,null],serviceCityName:"",serviceRegionName:"",serviceAddress:"",price:0},{handleSubmit:l,isSubmitting:t,resetForm:d,errors:v}=X({validationSchema:m,initialValues:i}),b=l(J(async k=>{u.value=!0,!await _(k)&&f&&f(),u.value=!1},800)),{value:n}=U("serviceType"),{value:a}=U("serviceTimePeriod"),{value:r}=U("serviceCityName"),{value:h}=U("serviceRegionName"),{value:o}=U("serviceAddress"),{value:c}=U("price");return{serviceType:n,serviceTimePeriod:a,serviceCityName:r,serviceRegionName:h,serviceAddress:o,price:c,formSubmit:b,isSubmitting:t,isSubmittingDisabled:u,resetForm:d,errors:v}},Ut={class:"flex items-start gap-x-2"},Et={key:0,class:"w-full"},Nt={class:"border-t border-gray-300 flex items-center justify-end gap-x-4 px-4 py-3"},Ot=N({__name:"Second",emits:["update:tempSave","update:cancel"],setup(_,{emit:f}){const u=f,m=he(),{serviceTypeOptionList:i}=q(m),{serviceType:l,serviceTimePeriod:t,serviceCityName:d,serviceRegionName:v,serviceAddress:b,price:n,formSubmit:a,isSubmittingDisabled:r,resetForm:h,errors:o}=Lt(async w=>(u("update:tempSave",w),!0)),c=R(()=>{const w=fe.find(y=>y.city===d.value);return w?w.districts.map(y=>({value:y.name,title:y.name})):[]}),k=fe.map(w=>({value:w.city,title:w.city})),D=()=>{h(),u("update:cancel")};return K(d,()=>{v.value=""}),(w,y)=>{const x=ve,te=be,se=xe,ie=Se,le=Y,oe=Q;return S(),$("form",{class:"flex flex-col gap-y-2 px-4",onSubmit:y[6]||(y[6]=P((...T)=>e(a)&&e(a)(...T),["prevent"]))},[p(x,{id:"serviceType",modelValue:e(l),"onUpdate:modelValue":y[0]||(y[0]=T=>C(l)?l.value=T:null),label:"預約服務",required:"",class:"w-full",options:e(i),disabled:e(r),"error-message":e(o).serviceType,"no-value":"",placeholder:"選擇服務"},null,8,["modelValue","options","disabled","error-message"]),p(te,{modelValue:e(t),"onUpdate:modelValue":y[1]||(y[1]=T=>C(t)?t.value=T:null),label:"服務時間",placeholder:"服務時間",required:"",disabled:e(r),"error-message":e(o).serviceTimePeriod,class:"w-full"},null,8,["modelValue","disabled","error-message"]),y[10]||(y[10]=s("div",{class:"w-full flex items-center gap-x-1"},[s("span",{class:"text-red-500 sm"},"*"),s("span",null," 服務地點 ")],-1)),s("div",Ut,[p(x,{modelValue:e(d),"onUpdate:modelValue":y[2]||(y[2]=T=>C(d)?d.value=T:null),"is-show-label":!1,placeholder:"選擇縣市",label:"縣市",required:"",class:"w-1/2","is-full-size":"",options:e(k),disabled:e(r),"no-value":""},null,8,["modelValue","options","disabled"]),p(x,{modelValue:e(v),"onUpdate:modelValue":y[3]||(y[3]=T=>C(v)?v.value=T:null),label:"行政區",placeholder:"選擇城鄉鎮市區","is-show-label":!1,"is-full-size":"",required:"",class:"w-1/2","no-value":"",options:e(c),disabled:e(r)},null,8,["modelValue","options","disabled"])]),e(o).serviceCityName||e(o).serviceRegionName?(S(),$("div",Et,g(e(o).serviceCityName||e(o).serviceRegionName),1)):M("",!0),p(se,{id:"serviceAddress",modelValue:e(b),"onUpdate:modelValue":y[4]||(y[4]=T=>C(b)?b.value=T:null),class:"w-full","is-show-label":!1,label:"地址",placeholder:"請輸入詳細地址",disabled:e(r),required:!0,"error-message":e(o).serviceAddress},null,8,["modelValue","disabled","error-message"]),p(ie,{modelValue:e(n),"onUpdate:modelValue":y[5]||(y[5]=T=>C(n)?n.value=T:null),label:"主要服務總金額",required:"",placeholder:"請輸入金額",disabled:e(r),class:"w-full"},{default:V(()=>y[7]||(y[7]=[s("div",{class:"flex items-center justify-center bg-gray-200 border-r border-gray-300 px-4"}," NT$ ",-1)])),_:1},8,["modelValue","disabled"]),s("div",Nt,[p(le,{label:"重設個人資料欄位按鈕",class:"border border-orange-600 min-w-24 flex items-center justify-center rounded-xl text-orange-600",onClick:P(D,["prevent"])},{default:V(()=>y[8]||(y[8]=[O(" 取消 ")])),_:1}),p(oe,{type:"submit",label:"註冊會員送出按鈕",class:"min-w-24 text-white"},{default:V(()=>y[9]||(y[9]=[O(" 下一步 ")])),_:1})])],32)}}}),Ft=(_,f)=>{const u=B(!1),m=Z(Ve),i={note:""},{handleSubmit:l,isSubmitting:t,resetForm:d,errors:v}=X({validationSchema:m,initialValues:i}),b=l(J(async a=>{u.value=!0,!await _(a)&&f&&f(),u.value=!1},800)),{value:n}=U("note");return{note:n,formSubmit:b,isSubmitting:t,isSubmittingDisabled:u,resetForm:d,errors:v}},Mt={class:"flex items-center justify-end gap-x-4 px-4 py-3 border-t border-gray-300"},Bt=N({__name:"Third",props:{petEditListForm:{},serviceForm:{}},emits:["update:step"],setup(_,{emit:f}){const u=f,m=z(),{handleEditOrder:i}=m,{note:l,formSubmit:t,isSubmittingDisabled:d,errors:v}=Ft(async n=>{if(_.petEditListForm===null||_.serviceForm===null)return!1;const a={...n,..._.petEditListForm,..._.serviceForm},r=$t.safeParse(a);if(!r.success)return console.error(r.error),!1;const h=r.data;return await i(h)}),b=()=>{u("update:step",2)};return(n,a)=>{const r=Ge,h=Y,o=Q;return S(),$("form",{class:"flex flex-col gap-y-2 px-4",onSubmit:a[1]||(a[1]=P((...c)=>e(t)&&e(t)(...c),["prevent"]))},[p(r,{modelValue:e(l),"onUpdate:modelValue":a[0]||(a[0]=c=>C(l)?l.value=c:null),label:"預約備注",placeholder:"此備註將會顯示於預約詳情內",required:"",class:"w-full",disabled:e(d),"show-limit":500,"error-message":e(v).note},null,8,["modelValue","disabled","error-message"]),s("div",Mt,[p(h,{label:"重設個人資料欄位按鈕",class:"border border-orange-600 min-w-24 flex items-center justify-center rounded-xl text-orange-600",onClick:P(b,["prevent"])},{default:V(()=>a[2]||(a[2]=[O(" 上一步 ")])),_:1}),p(o,{type:"submit",label:"註冊會員送出按鈕",class:"min-w-24 text-white"},{default:V(()=>a[3]||(a[3]=[O(" 送出給飼主 ")])),_:1})])],32)}}}),jt={class:"flex items-center justify-between border-b border-gray-200 px-4 py-3"},Rt={class:"flex flex-col items-start gap-y-1"},zt={class:"text-gray-300 sm"},At=N({__name:"EditService",props:ye({ticketCode:{}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(_){const f=z(),{resetCurrentEditDetail:u}=f,m=_e(_,"modelValue"),i=B(1),l=me(null),t=me(null),d=a=>{l.value=a,l.value!==null&&n(2)},v=a=>{t.value=a,l.value!==null&&t.value!==null&&n(3)},b=()=>{m.value=!1},n=a=>{i.value=a};return K(()=>m,a=>{a||(l.value=null,t.value=null,i.value=1,u())}),(a,r)=>{const h=je,o=Pt,c=Ot,k=Bt,D=We;return S(),j(D,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=w=>m.value=w),fullscreen:"",ui:{container:"flex items-center justify-center w-full",fullscreen:"w-full h-full md:w-[40vw] max-h-[95vh]",base:"rounded-xl shadow-xl border border-gray-200 overflow-y-auto py-2.5 gap-y-4"}},{default:V(()=>[s("div",jt,[s("div",Rt,[r[2]||(r[2]=s("h3",{class:"text-xl font-medium"}," 編輯項目與金額 ",-1)),s("span",zt,"預約編號 "+g(a.ticketCode)+"，Step "+g(e(i))+"/3",1)]),p(h,{onClick:r[0]||(r[0]=w=>m.value=!1)})]),H(p(o,{"onUpdate:tempSave":d,"onUpdate:cancel":b},null,512),[[re,e(i)===1]]),H(p(c,{"onUpdate:tempSave":v,"onUpdate:cancel":b},null,512),[[re,e(i)===2]]),H(p(k,{"pet-edit-list-form":e(l),"service-form":e(t),"onUpdate:step":n},null,8,["pet-edit-list-form","service-form"]),[[re,e(i)===3]])]),_:1},8,["modelValue"])}}}),It={class:"flex flex-col items-start gap-y-4 px-6 py-4 border border-gray-200"},qt={class:"w-full flex items-center justify-between"},Yt={class:"border-b border-gray-200 w-full flex items-start gap-x-4 pb-6"},Ht={class:"flex flex-col grow items-start gap-y-2"},Gt={class:"text-xl font-medium"},Wt={class:"w-full flex items-center justify-between"},Jt={class:"flex flex-col items-start text-gray-500"},Kt={class:"w-full flex items-center justify-between py-2"},Qt=N({__name:"ServiceInfo",props:{ticketCode:{},petSitterName:{},mainServiceName:{},servicePetSitterPhotoUrl:{},price:{},address:{},serviceStart:{},serviceEnd:{},petName:{},serviceDetail:{},serviceExtraService:{},totalPrice:{}},setup(_){const f=z(),{handleGetOrderEditDetail:u}=f,m=B(!1),i=R(()=>`background-image: url('${_.servicePetSitterPhotoUrl}')`),l=async()=>{const t=await u(_.ticketCode);return t&&(m.value=!0),t};return(t,d)=>{const v=Y,b=At;return S(),$("div",It,[s("div",qt,[d[2]||(d[2]=s("span",{class:"w-full text-lg font-medium"},"服務資訊",-1)),p(v,{label:"送出驗證碼按鈕",class:"border border-orange-300 min-w-38 flex items-center justify-center rounded-xl text-orange-600",onClick:P(l,["prevent"])},{default:V(()=>d[1]||(d[1]=[O(" 編輯項目與金額 ")])),_:1})]),s("div",Yt,[s("div",{class:"aspect-square w-28 rounded-xl bg-cover bg-center bg-no-repeat",style:Ee(e(i))},null,4),s("div",Ht,[s("h4",Gt,g(t.petSitterName),1),s("div",Wt,[s("span",null,"服務-"+g(t.mainServiceName),1),s("span",null,"NT$"+g(t.price),1)]),(S(!0),$(G,null,W(t.serviceExtraService,n=>(S(),$("div",{key:n.id,class:"w-full flex items-center justify-between"},[s("span",null,"額外細項-"+g(n.name),1),s("span",null,"NT$"+g(n.price.toLocaleString()),1)]))),128)),s("div",Jt,[s("span",null,"服務時間: "+g(("useDateFormat"in t?t.useDateFormat:e(ne))(t.serviceStart,"YYYY/MM/DD HH:mm"))+" → "+g(("useDateFormat"in t?t.useDateFormat:e(ne))(t.serviceEnd,"YYYY/MM/DD HH:mm")),1),s("span",null,"服務地點: "+g(t.address),1),s("span",null,"寵物名稱: "+g(t.petName),1),s("span",null,"服務細項: "+g(t.serviceDetail),1)])])]),s("div",Kt,[d[3]||(d[3]=s("span",null,"總金額",-1)),s("span",null,"NT$"+g(t.totalPrice.toLocaleString()),1)]),p(b,{modelValue:e(m),"onUpdate:modelValue":d[0]||(d[0]=n=>C(m)?m.value=n:null),"ticket-code":t.ticketCode},null,8,["modelValue","ticket-code"])])}}}),Xt={key:0,class:"w-full rounded-xl bg-white flex flex-col"},Zt={class:"flex flex-col gap-y-4 px-4 py-3"},es={class:"whitespace-pre-line leading-relaxed"},ts=N({__name:"Detail",emits:["update:comment"],setup(_){const f=z(),{handleCancelReservation:u,resetCurrentDetailTicketCode:m,resetCurrentOrderDetail:i,handlePayTheBill:l}=f,{currentOrderDetail:t}=q(f),d=R(()=>{const b=t.value;if(b===null)return 0;const n=b.mainService.price;return!b.serviceExtraService||b.serviceExtraService.length===0?n:n+b.serviceExtraService.reduce((a,r)=>a+r.price,0)}),v=()=>{m(),i()};return(b,n)=>{const a=ge,r=ce,h=ft,o=Be,c=Qt,k=Je;return e(t)!==null?(S(),$("div",Xt,[p(r,{class:"border-b border-gray-200 w-full flex items-center gap-x-2 px-4 py-6",label:"回到預約詳情按鈕",onClick:P(v,["prevent"])},{default:V(()=>[p(a,{name:"i-uis:angle-left"}),n[2]||(n[2]=s("h3",null,"預約詳情",-1))]),_:1}),s("div",Zt,[p(h,{status:e(t).status,price:e(t).mainService.price,"service-name":e(t).mainService.name,"keeper-phone":e(t).keeperphone,"onUpdate:payTheBill":n[0]||(n[0]=D=>e(l)(e(t).ticketCode)),"onUpdate:comment":n[1]||(n[1]=D=>b.$emit("update:comment",e(t).ticketCode))},null,8,["status","price","service-name","keeper-phone"]),p(o,{"ticket-code":e(t).ticketCode,"ticket-estiblish-time":e(t).ticketEstiblishTime,price:e(t).mainService.price,"keeper-name":e(t).keeperName,"keeper-phone":e(t).keeperphone,"keeper-mail":e(t).keeperEmail,status:e(t).status,"onUpdate:cancelReservation":e(u)},null,8,["ticket-code","ticket-estiblish-time","price","keeper-name","keeper-phone","keeper-mail","status","onUpdate:cancelReservation"]),p(c,{class:"-mt-4","ticket-code":e(t).ticketCode,"pet-sitter-name":e(t).servicePetSitterName,"main-service-name":e(t).mainService.name,"service-pet-sitter-photo-url":e(t).servicePetSitterPhotoUrl,price:e(t).mainService.price,address:e(t).serviceAddress,"service-start":e(t).serviceTimeStart,"service-end":e(t).serviceTimeEnd,"pet-name":e(t).petNameDescription,"service-detail":e(t).serviceDetail,"service-extra-service":e(t).serviceExtraService,"total-price":e(d)},null,8,["ticket-code","pet-sitter-name","main-service-name","service-pet-sitter-photo-url","price","address","service-start","service-end","pet-name","service-detail","service-extra-service","total-price"]),s("article",{class:ue(["-mt-4 border border-gray-300",{"rounded-b-xl":!e(t).discussionList||e(t).discussionList.length===0,"border-b-none":e(t).discussionList&&e(t).discussionList.length>0}])},[n[3]||(n[3]=s("h4",{class:"text-lg font-medium"}," 預約單備注 ",-1)),s("p",es,g(e(t).description),1)],2),e(t).discussionList&&e(t).discussionList.length>0?(S(),j(k,{key:0,class:"-mt-4 w-full","is-top-not-rounded":"","discussion-list":e(t).discussionList},null,8,["discussion-list"])):M("",!0)])])):M("",!0)}}}),ss=(_,f)=>{const u=B(!1),m=Z(De),i={ticketCode:"",serviceType:"",orderTimePeriod:[null,null]},{handleSubmit:l,isSubmitting:t,resetForm:d,errors:v}=X({validationSchema:m,initialValues:i}),b=l(J(async h=>{u.value=!0,!await _(h)&&f&&f(),u.value=!1},800)),{value:n}=U("ticketCode"),{value:a}=U("serviceType"),{value:r}=U("orderTimePeriod");return{ticketCode:n,serviceType:a,orderTimePeriod:r,formSubmit:b,isSubmitting:t,isSubmittingDisabled:u,resetForm:d,errors:v}},is={key:0,class:"rounded-xl bg-white"},ls={class:"flex flex-col gap-y-4 px-4 py-3"},os={class:"py-3"},rs={class:"flex items-center justify-center"},ai=N({__name:"orderList",setup(_){const f=he(),{serviceTypeOptionList:u}=q(f),m=z(),{handleSearchOrderList:i,handleGetOrderDetail:l,resetCurrentDetailTicketCode:t,resetCurrentOrderDetail:d}=m,{petSitterOrderList:v,currentDetailTicketCode:b}=q(m),n=B(1),{ticketCode:a,serviceType:r,orderTimePeriod:h,formSubmit:o,isSubmittingDisabled:c,errors:k}=ss(async y=>await i(y,n.value)),D=[{id:1,title:"全部"},{id:2,title:F.get(E.PendingForReply)??""},{id:3,title:F.get(E.ReservedPay)??""},{id:4,title:F.get(E.WaitForService)??""},{id:5,title:F.get(E.FinishedNoComment)??""},{id:6,title:F.get(E.Finished)??""},{id:7,title:F.get(E.Canceled)??""},{id:8,title:F.get(E.Error)??""}],w=B(1);return Ne(async()=>{await i({orderTimePeriod:[null,null]},n.value)}),K([a,r,h],async()=>{await o()}),Oe(()=>{t(),d()}),(y,x)=>{const te=Ce,se=Pe,ie=ve,le=be,oe=it,T=Le,Te=ts;return e(b)===""?(S(),$("div",is,[x[6]||(x[6]=s("div",{class:"px-4 py-3 border-b border-gray-200"}," 接單列表 ",-1)),s("div",ls,[p(te,{modelValue:e(w),"onUpdate:modelValue":x[0]||(x[0]=L=>C(w)?w.value=L:null),class:"w-full","tab-list":D},null,8,["modelValue"]),s("form",{class:"flex items-start gap-x-2",onSubmit:x[4]||(x[4]=P((...L)=>e(o)&&e(o)(...L),["prevent"]))},[p(se,{id:"reservationTicketCode",modelValue:e(a),"onUpdate:modelValue":x[1]||(x[1]=L=>C(a)?a.value=L:null),class:"w-1/3","is-show-label":!1,label:"輸入預約編號",placeholder:"輸入預約編號",disabled:e(c),required:!0,"error-message":e(k).ticketCode},null,8,["modelValue","disabled","error-message"]),p(ie,{id:"serviceType",modelValue:e(r),"onUpdate:modelValue":x[2]||(x[2]=L=>C(r)?r.value=L:null),"is-show-label":!1,label:"選擇服務",required:"","is-full-size":"",options:e(u),disabled:e(c),"error-message":e(k).serviceType,"no-value":"",placeholder:"選擇服務",class:"w-1/3"},null,8,["modelValue","options","disabled","error-message"]),p(le,{id:"reservationTimeSelector",modelValue:e(h),"onUpdate:modelValue":x[3]||(x[3]=L=>C(h)?h.value=L:null),"is-show-label":!1,label:"預約時間",placeholder:"預約時間",disabled:e(c),"error-message":e(k).orderTimePeriod,"is-full-size":"",class:"w-1/3"},null,8,["modelValue","disabled","error-message"])],32),s("div",os,[p(oe,{class:"w-full","order-list":e(v),"onUpdate:showDetail":e(l)},null,8,["order-list","onUpdate:showDetail"])]),s("div",rs,[p(T,{modelValue:e(n),"onUpdate:modelValue":x[5]||(x[5]=L=>C(n)?n.value=L:null),max:5,"page-count":10,total:100},null,8,["modelValue"])])])])):(S(),j(Te,{key:1}))}}});export{ai as default};
